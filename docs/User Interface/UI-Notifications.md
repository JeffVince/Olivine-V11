# Notifications UI

* [ ] **Notifications UI:** A unified system for notifying users of events, surfaced via an in-app notification center and (if enabled) external channels.

  * [ ] **Notification Bell & Counter:** Show a notification bell icon (commonly in the header/top-right). When there are unread notifications, display a badge count. Clicking the icon opens a dropdown or sidebar with the recent notifications.
  * [ ] **Notifications List:** List recent notifications in reverse chronological order. Each notification entry should include a short description and timestamp. For example: "‚úÖ File sync completed for 'Project Sunrise'" or "‚ö†Ô∏è Dropbox token expired ‚Äì please reauthenticate" or "üí° 3 new suggestions waiting for approval." Use an icon or emoji to categorize (info, success, warning, error).
  * [ ] **Interactivity:** If a notification relates to a specific item or requires action, make it clickable. Clicking a notification could deep-link the user to the relevant page (e.g. clicking "3 new suggestions" opens the Approvals view, clicking a "Call sheet ready" notification opens that call sheet preview, clicking an error opens Integrations settings). Ensure a smooth UX (the notification panel closes and then navigates).
  * [ ] **Mark as Read/Clear:** When the user opens the panel, mark notifications as read (or provide a way to mark individual ones as read/unread). Possibly allow dismissing notifications individually (an "x" or swipe) or a "Clear All" if they want to remove old alerts. Unread vs read state could be indicated with bold text or a dot.
  * [ ] **Real-Time Emission:** Notifications should appear in real-time as events happen (through WebSocket or Supabase real-time push). For example, if a background job fails, the UI should show an error notification without a page refresh. Likewise, when an AI task completes (e.g. call sheet generation finished), a notification should pop up. Consider using toast pop-ups in addition to adding to the notification list for immediate awareness, especially for success/error events (toasts can auto-dismiss, but the notification center retains a record).
  * [ ] **Email/External Notifications:** If the user has opted in, certain events should also trigger email or Slack notifications. While this is mostly backend, the UI could reflect which notifications have been sent externally or allow toggling those preferences (which ties back to Notification Preferences in Settings).
  * [ ] **Error and Edge Cases:** If the notification retrieval fails (e.g. server unavailable), show an appropriate message in the dropdown ("Unable to load notifications"). If a notification is about an issue that's now resolved or outdated (like an OAuth token expired but user already fixed it), handle it by possibly updating or removing that notification to avoid confusion.
