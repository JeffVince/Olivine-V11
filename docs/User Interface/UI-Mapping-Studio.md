# Mapping Studio (Policy & File Mapping)

* [ ] **Mapping Studio (Policy & File Mapping):** A workspace for managing project file policies, naming conventions, and the mapping of expected files versus actual files.

  * [ ] **Policy Overview:** Display the set of expected file types/categories for the project (often derived from the reference project or a template). For each expected file or category, show its defined naming rule or pattern, required/optional status, and any example (from reference). E.g., "Footage: files matching `Scene<Number>_Cam<Letter>_Take<Number>.mp4`, required for each shooting day."
  * [ ] **Reference Policy Import:** If a reference project was linked, show the imported structure/policies (e.g. a summary like "Imported 10 file categories from Project Alpha on 07/15"). Allow the user to adjust these policies: for instance, rename categories, change requirements, or remove some.
  * [ ] **Actual vs Expected Mapping:** List each expected file or category alongside the current project's file that satisfies it (if found). If the expected item is present, show the matched file name (with a check mark if it meets naming exactly, or warning if it deviates). If not present, flag it as missing. For each mapping:

    * [ ] Highlight **missing files** that are required (e.g. "Lighting\_Budget.xlsx – Missing – please add this file" with possibly an option to upload or mark as N/A).
    * [ ] Highlight **naming mismatches:** if a file exists but doesn't match the expected pattern, show the suggested rename (e.g. "Found 'Scene5\_shotA.mp4' – expected format 'Scene5\_CamA\_Take1.mp4'" as a suggestion).
    * [ ] Highlight **uncertain classifications:** if the AI couldn't confidently assign a file to a category, list those files separately (e.g. "Uncategorized files") with options for the user to classify them into a category or mark them as exceptions.
    * [ ] Handle **mapping conflicts:** if multiple files could fit one expected slot or a file seems to belong to more than one category, flag the conflict and allow the user to resolve (choose one mapping or split categories as needed).
  * [ ] **Manual Policy Overrides:** Provide controls to manually adjust mappings and policies. Users can map an unmatched file to fulfill a requirement (drag-and-drop or select from a dropdown of files for an expected slot), and the system updates its records accordingly. Users can also add a new expected file category (for example, if they realize an additional document type is needed) and define its naming rule, or mark certain expected items as "excluded" or not needed for this project.
  * [ ] **Save & Apply:** When policy changes are made (adding/removing expected files, changing naming conventions), allow the user to save/apply these changes. On save, propagate updates to the backend (so the File Steward agent knows the new rules) and trigger a re-check of files against the updated policy. Provide feedback (toasts or messages) when policies are updated successfully or if any error (e.g. invalid regex in naming rule).
  * [ ] Ensure **real-time feedback:** if the AI detects a new issue or a previously missing file gets added (via sync) while the user is in Mapping Studio, update the mapping list live (e.g. the missing item becomes fulfilled). Conversely, changes in policy should reflect immediately in other views (e.g. File Explorer file status).
