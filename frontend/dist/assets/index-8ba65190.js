import{r as T,c as G,v as j,a8 as D,a9 as e,a5 as a,a7 as b,A as t,E as C,_ as s,ac as B,ad as H,F as Z,W as v,D as ae,ae as ne,B as O,w as oe,M as le,u as p,a as P}from"./vue-b3dbcb9b.js";import{a as se}from"./index-c29b4afb.js";import{_ as U}from"./_plugin-vue_export-helper-c27b6911.js";import"./apollo-9599811a.js";import"./supabase-cf010ec4.js";const E=T([]),ie=T([{id:"1",name:"File Metadata",description:"Map file properties like name, size, and timestamps",type:"file-metadata",icon:"mdi-file",color:"blue"},{id:"2",name:"User Directory",description:"Map user directory structures and permissions",type:"user-directory",icon:"mdi-account-group",color:"green"},{id:"3",name:"Project Structure",description:"Map project folder hierarchies and organization",type:"project-structure",icon:"mdi-folder-multiple",color:"orange"}]),re=T({name:"",description:"",type:"",sourceType:""}),pe=T(!1),ue=T(!1),de=T("grid"),ce=G(()=>E.value.filter(o=>o.status==="active").length),me=G(()=>E.value.filter(o=>o.status==="inactive").length);function W(){return{mappings:E,mappingTemplates:ie,newMapping:re,showCreateDialog:pe,creating:ue,viewMode:de,activeMappingsCount:ce,inactiveMappingsCount:me}}const z=se(),{mappings:N,newMapping:J,showCreateDialog:K,creating:A}=W();function _e(o){switch(o){case"file-metadata":return"blue";case"user-directory":return"green";case"project-structure":return"orange";case"asset-metadata":return"purple";default:return"grey"}}function ve(o){switch(o){case"file-metadata":return"mdi-file";case"user-directory":return"mdi-account-group";case"project-structure":return"mdi-folder-multiple";case"asset-metadata":return"mdi-image-multiple";default:return"mdi-map"}}function fe(o){return new Date(o).toLocaleDateString()}async function ge(o){A.value=!0;try{await new Promise(n=>setTimeout(n,1e3));const i={id:Date.now().toString(),name:o.name,description:o.description,type:o.type,status:"inactive",fieldCount:0,transformCount:0};N.value.push(i),K.value=!1,J.value={name:"",description:"",type:"",sourceType:""},z.add("success","Mapping created successfully")}catch{z.add("error","Failed to create mapping")}finally{A.value=!1}}function ye(o){J.value={name:`${o.name} Mapping`,description:o.description,type:o.type,sourceType:"dropbox"},K.value=!0}function Q(o){z.add("info",`Opening editor for ${o.name}`)}function Me(o){Q(o)}async function Ce(o){try{await new Promise(i=>setTimeout(i,2e3)),z.add("success",`Test completed for ${o.name}`)}catch{z.add("error",`Test failed for ${o.name}`)}}function be(o){const i={...o,id:Date.now().toString(),name:`${o.name} (Copy)`,status:"inactive"};N.value.push(i),z.add("success","Mapping duplicated successfully")}function xe(o){o.status=o.status==="active"?"inactive":"active",z.add("info",`Mapping ${o.status==="active"?"activated":"deactivated"}`)}function $e(o){const i=N.value.findIndex(n=>n.id===o.id);i>-1&&(N.value.splice(i,1),z.add("info","Mapping deleted"))}function ke(){N.value=[{id:"1",name:"Dropbox File Metadata",description:"Maps Dropbox file properties to project database",type:"file-metadata",status:"active",fieldCount:6,transformCount:3,lastRun:"2024-01-15T10:30:00Z"},{id:"2",name:"User Directory Structure",description:"Maps user directory hierarchies and permissions",type:"user-directory",status:"inactive",fieldCount:4,transformCount:2},{id:"3",name:"Project Asset Metadata",description:"Maps asset metadata for project organization",type:"asset-metadata",status:"active",fieldCount:8,transformCount:5,lastRun:"2024-01-14T15:45:00Z"}]}function we(){return{getMappingColor:_e,getMappingIcon:ve,formatDate:fe,createMapping:ge,createFromTemplate:ye,editMapping:Q,openMappingEditor:Me,testMapping:Ce,duplicateMapping:be,toggleMappingStatus:xe,deleteMapping:$e,initializeMappings:ke}}const Te=j({__name:"Header",emits:["create-mapping"],setup(o,{emit:i}){return(n,l)=>{const f=a("v-col"),d=a("v-btn"),g=a("v-row");return b(),D(g,{class:"mb-4"},{default:e(()=>[t(f,{cols:"12",md:"8"},{default:e(()=>l[1]||(l[1]=[C("h1",{class:"text-h4 font-weight-bold"}," Mapping Studio ",-1),C("p",{class:"text-subtitle-1 text-medium-emphasis"}," Configure data transformations and field mappings ",-1)])),_:1,__:[1]}),t(f,{cols:"12",md:"4",class:"text-right"},{default:e(()=>[t(d,{color:"primary","prepend-icon":"mdi-plus",class:"liquid-button",onClick:l[0]||(l[0]=x=>n.$emit("create-mapping"))},{default:e(()=>l[2]||(l[2]=[s(" Create Mapping ",-1)])),_:1,__:[2]})]),_:1})]),_:1})}}});const De=U(Te,[["__scopeId","data-v-f1b0fcb4"]]),ze={class:"text-h6 mb-1"},Ve={class:"text-caption text-medium-emphasis mb-2"},Se=j({__name:"MappingTemplates",props:{templates:{}},emits:["create-from-template"],setup(o){return(i,n)=>{const l=a("v-icon"),f=a("v-card-title"),d=a("v-avatar"),g=a("v-chip"),x=a("v-card-text"),k=a("v-card"),_=a("v-col"),r=a("v-row");return b(),D(r,{class:"mb-6"},{default:e(()=>[t(_,{cols:"12"},{default:e(()=>[t(k,{class:"glass-card"},{default:e(()=>[t(f,null,{default:e(()=>[t(l,{class:"mr-2"},{default:e(()=>n[0]||(n[0]=[s(" mdi-file-document-multiple ",-1)])),_:1,__:[0]}),n[1]||(n[1]=s(" Mapping Templates ",-1))]),_:1,__:[1]}),t(x,null,{default:e(()=>[t(r,null,{default:e(()=>[(b(!0),B(Z,null,H(i.templates,y=>(b(),D(_,{key:y.id,cols:"12",sm:"6",md:"4"},{default:e(()=>[t(k,{variant:"outlined",class:"template-card glass-card",onClick:c=>i.$emit("create-from-template",y)},{default:e(()=>[t(x,{class:"text-center pa-4"},{default:e(()=>[t(d,{color:y.color,size:"48",class:"mb-3"},{default:e(()=>[t(l,{color:"white",size:"24"},{default:e(()=>[s(v(y.icon),1)]),_:2},1024)]),_:2},1032,["color"]),C("h3",ze,v(y.name),1),C("p",Ve,v(y.description),1),t(g,{size:"small",variant:"tonal",class:"mb-2"},{default:e(()=>[s(v(y.type),1)]),_:2},1024)]),_:2},1024)]),_:2},1032,["onClick"])]),_:2},1024))),128))]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})}}});const Fe=U(Se,[["__scopeId","data-v-e81c324f"]]),Ie={class:"text-truncate"},je={class:"text-medium-emphasis text-caption mb-3"},Ue={class:"d-flex align-center text-caption mb-2"},Ne={key:0,class:"d-flex align-center text-caption"},Re=j({__name:"MappingGrid",props:{mappings:{},getMappingColor:{type:Function},getMappingIcon:{type:Function},formatDate:{type:Function}},emits:["edit","test","toggle-status","duplicate","delete"],setup(o){return(i,n)=>{const l=a("v-icon"),f=a("v-avatar"),d=a("v-spacer"),g=a("v-chip"),x=a("v-card-title"),k=a("v-card-text"),_=a("v-btn"),r=a("v-list-item-title"),y=a("v-list-item"),c=a("v-list"),$=a("v-menu"),V=a("v-card-actions"),S=a("v-card"),F=a("v-col"),I=a("v-row");return b(),D(I,null,{default:e(()=>[(b(!0),B(Z,null,H(i.mappings,u=>(b(),D(F,{key:u.id,cols:"12",md:"6",lg:"4"},{default:e(()=>[t(S,{class:ae(["mapping-card glass-card",{"border-success":u.status==="active"}])},{default:e(()=>[t(x,{class:"d-flex align-center"},{default:e(()=>[t(f,{color:i.getMappingColor(u.type),size:"36",class:"mr-3"},{default:e(()=>[t(l,{color:"white",size:"18"},{default:e(()=>[s(v(i.getMappingIcon(u.type)),1)]),_:2},1024)]),_:2},1032,["color"]),C("span",Ie,v(u.name),1),t(d),t(g,{color:u.status==="active"?"success":"grey",size:"small",variant:"tonal"},{default:e(()=>[s(v(u.status),1)]),_:2},1032,["color"])]),_:2},1024),t(k,null,{default:e(()=>[C("p",je,v(u.description),1),C("div",Ue,[t(l,{size:"small",class:"mr-2"},{default:e(()=>n[0]||(n[0]=[s("mdi-format-list-bulleted",-1)])),_:1,__:[0]}),C("span",null,v(u.fieldCount)+" fields",1),t(l,{size:"small",class:"mx-2"},{default:e(()=>n[1]||(n[1]=[s("mdi-arrow-right",-1)])),_:1,__:[1]}),C("span",null,v(u.transformCount)+" transforms",1)]),u.lastRun?(b(),B("div",Ne,[t(l,{size:"small",class:"mr-2"},{default:e(()=>n[2]||(n[2]=[s("mdi-clock-outline",-1)])),_:1,__:[2]}),C("span",null,"Last run: "+v(i.formatDate(u.lastRun)),1)])):ne("",!0)]),_:2},1024),t(V,null,{default:e(()=>[t(_,{size:"small",variant:"text",onClick:w=>i.$emit("edit",u)},{default:e(()=>[t(l,{size:"small",class:"mr-1"},{default:e(()=>n[3]||(n[3]=[s("mdi-pencil",-1)])),_:1,__:[3]}),n[4]||(n[4]=s(" Edit ",-1))]),_:2,__:[4]},1032,["onClick"]),t(_,{size:"small",variant:"text",onClick:w=>i.$emit("test",u)},{default:e(()=>[t(l,{size:"small",class:"mr-1"},{default:e(()=>n[5]||(n[5]=[s("mdi-test-tube",-1)])),_:1,__:[5]}),n[6]||(n[6]=s(" Test ",-1))]),_:2,__:[6]},1032,["onClick"]),t(d),t(_,{size:"small",variant:"text",onClick:w=>i.$emit("toggle-status",u)},{default:e(()=>[t(l,{size:"small",class:"mr-1"},{default:e(()=>[s(v(u.status==="active"?"mdi-pause":"mdi-play"),1)]),_:2},1024),s(" "+v(u.status==="active"?"Pause":"Activate"),1)]),_:2},1032,["onClick"]),t($,null,{activator:e(({props:w})=>[t(_,O({size:"small",variant:"text",icon:"mdi-dots-vertical"},{ref_for:!0},w),null,16)]),default:e(()=>[t(c,{density:"compact"},{default:e(()=>[t(y,{onClick:w=>i.$emit("duplicate",u)},{prepend:e(()=>[t(l,null,{default:e(()=>n[7]||(n[7]=[s("mdi-content-copy",-1)])),_:1,__:[7]})]),default:e(()=>[t(r,null,{default:e(()=>n[8]||(n[8]=[s("Duplicate",-1)])),_:1,__:[8]})]),_:2},1032,["onClick"]),t(y,{onClick:w=>i.$emit("delete",u),class:"text-error"},{prepend:e(()=>[t(l,null,{default:e(()=>n[9]||(n[9]=[s("mdi-delete",-1)])),_:1,__:[9]})]),default:e(()=>[t(r,null,{default:e(()=>n[10]||(n[10]=[s("Delete",-1)])),_:1,__:[10]})]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1032,["class"])]),_:2},1024))),128))]),_:1})}}});const Be=U(Re,[["__scopeId","data-v-faa8b235"]]),Ee=j({__name:"MappingList",props:{mappings:{},getMappingColor:{type:Function},getMappingIcon:{type:Function},formatDate:{type:Function}},emits:["edit","test","toggle-status","duplicate","delete"],setup(o){const i=[{title:"Name",key:"name",sortable:!0},{title:"Type",key:"type",sortable:!0},{title:"Status",key:"status",sortable:!0},{title:"Fields",key:"fieldCount",sortable:!0},{title:"Transforms",key:"transformCount",sortable:!0},{title:"Last Run",key:"lastRun",sortable:!0},{title:"Actions",key:"actions",sortable:!1}];return(n,l)=>{const f=a("v-icon"),d=a("v-chip"),g=a("v-btn"),x=a("v-list-item-title"),k=a("v-list-item"),_=a("v-list"),r=a("v-menu"),y=a("v-data-table");return b(),D(y,{headers:i,items:n.mappings,"item-value":"id",class:"glass-card"},{"item.type":e(({item:c})=>[t(d,{color:n.getMappingColor(c.type),size:"small",variant:"tonal"},{default:e(()=>[t(f,{start:"",size:"small"},{default:e(()=>[s(v(n.getMappingIcon(c.type)),1)]),_:2},1024),s(" "+v(c.type),1)]),_:2},1032,["color"])]),"item.status":e(({item:c})=>[t(d,{color:c.status==="active"?"success":"grey",size:"small",variant:"tonal"},{default:e(()=>[s(v(c.status),1)]),_:2},1032,["color"])]),"item.lastRun":e(({item:c})=>[s(v(c.lastRun?n.formatDate(c.lastRun):"Never"),1)]),"item.actions":e(({item:c})=>[t(g,{size:"small",variant:"text",icon:"mdi-pencil",onClick:$=>n.$emit("edit",c)},null,8,["onClick"]),t(g,{size:"small",variant:"text",icon:"mdi-test-tube",onClick:$=>n.$emit("test",c)},null,8,["onClick"]),t(g,{size:"small",variant:"text",icon:c.status==="active"?"mdi-pause":"mdi-play",onClick:$=>n.$emit("toggle-status",c)},null,8,["icon","onClick"]),t(r,null,{activator:e(({props:$})=>[t(g,O({size:"small",variant:"text",icon:"mdi-dots-vertical"},$),null,16)]),default:e(()=>[t(_,{density:"compact"},{default:e(()=>[t(k,{onClick:$=>n.$emit("duplicate",c)},{prepend:e(()=>[t(f,null,{default:e(()=>l[0]||(l[0]=[s("mdi-content-copy",-1)])),_:1,__:[0]})]),default:e(()=>[t(x,null,{default:e(()=>l[1]||(l[1]=[s("Duplicate",-1)])),_:1,__:[1]})]),_:2},1032,["onClick"]),t(k,{onClick:$=>n.$emit("delete",c),class:"text-error"},{prepend:e(()=>[t(f,null,{default:e(()=>l[2]||(l[2]=[s("mdi-delete",-1)])),_:1,__:[2]})]),default:e(()=>[t(x,null,{default:e(()=>l[3]||(l[3]=[s("Delete",-1)])),_:1,__:[3]})]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)]),_:1},8,["items"])}}});const qe=U(Ee,[["__scopeId","data-v-85874870"]]),Le=j({__name:"CreateMappingDialog",props:{modelValue:{type:Boolean},mapping:{},creating:{type:Boolean}},emits:["update:modelValue","save"],setup(o,{emit:i}){const n=i,l=T(!1),f=T(),d=T({name:"",description:"",type:"",sourceType:""});oe(()=>d.value,_=>{d.value={..._}},{deep:!0});const g=[{title:"File Metadata",value:"file-metadata"},{title:"User Directory",value:"user-directory"},{title:"Project Structure",value:"project-structure"},{title:"Asset Metadata",value:"asset-metadata"}],x=[{title:"Dropbox",value:"dropbox"},{title:"Google Drive",value:"google-drive"},{title:"S3 Bucket",value:"s3"}];function k(){f.value.validate()&&n("save",d.value)}return(_,r)=>{const y=a("v-card-title"),c=a("v-text-field"),$=a("v-textarea"),V=a("v-select"),S=a("v-form"),F=a("v-card-text"),I=a("v-spacer"),u=a("v-btn"),w=a("v-card-actions"),q=a("v-card"),M=a("v-dialog");return b(),D(M,{"model-value":_.modelValue,"onUpdate:modelValue":r[6]||(r[6]=m=>_.$emit("update:modelValue",m)),"max-width":"500px"},{default:e(()=>[t(q,null,{default:e(()=>[t(y,null,{default:e(()=>r[7]||(r[7]=[C("span",{class:"text-h5"},"Create New Mapping",-1)])),_:1,__:[7]}),t(F,null,{default:e(()=>[t(S,{ref_key:"form",ref:f,modelValue:l.value,"onUpdate:modelValue":r[4]||(r[4]=m=>l.value=m)},{default:e(()=>[t(c,{modelValue:d.value.name,"onUpdate:modelValue":r[0]||(r[0]=m=>d.value.name=m),label:"Mapping Name","prepend-icon":"mdi-form-textbox",rules:[m=>!!m||"Name is required"],required:""},null,8,["modelValue","rules"]),t($,{modelValue:d.value.description,"onUpdate:modelValue":r[1]||(r[1]=m=>d.value.description=m),label:"Description","prepend-icon":"mdi-text",rows:"3"},null,8,["modelValue"]),t(V,{modelValue:d.value.type,"onUpdate:modelValue":r[2]||(r[2]=m=>d.value.type=m),items:g,label:"Mapping Type","prepend-icon":"mdi-format-list-bulleted-type",rules:[m=>!!m||"Type is required"],required:""},null,8,["modelValue","rules"]),t(V,{modelValue:d.value.sourceType,"onUpdate:modelValue":r[3]||(r[3]=m=>d.value.sourceType=m),items:x,label:"Source Type","prepend-icon":"mdi-database",rules:[m=>!!m||"Source type is required"],required:""},null,8,["modelValue","rules"])]),_:1},8,["modelValue"])]),_:1}),t(w,null,{default:e(()=>[t(I),t(u,{variant:"text",onClick:r[5]||(r[5]=m=>_.$emit("update:modelValue",!1))},{default:e(()=>r[8]||(r[8]=[s(" Cancel ",-1)])),_:1,__:[8]}),t(u,{color:"primary",loading:_.creating,disabled:!l.value,onClick:k},{default:e(()=>r[9]||(r[9]=[s(" Create ",-1)])),_:1,__:[9]},8,["loading","disabled"])]),_:1})]),_:1})]),_:1},8,["model-value"])}}});const Pe=U(Le,[["__scopeId","data-v-8032ff44"]]),Ae={class:"d-flex align-center"},Ge={class:"text-body-2 mr-4"},He=j({__name:"index",setup(o){const{mappings:i,mappingTemplates:n,newMapping:l,showCreateDialog:f,creating:d,viewMode:g,activeMappingsCount:x,inactiveMappingsCount:k}=W(),{getMappingColor:_,getMappingIcon:r,formatDate:y,createMapping:c,createFromTemplate:$,editMapping:V,testMapping:S,duplicateMapping:F,toggleMappingStatus:I,deleteMapping:u,initializeMappings:w}=we();return le(()=>{w()}),(q,M)=>{const m=a("v-icon"),L=a("v-btn"),X=a("v-btn-toggle"),Y=a("v-card-title"),h=a("v-card"),ee=a("v-col"),te=a("v-row");return b(),B("div",null,[t(De,{onCreateMapping:M[0]||(M[0]=R=>f.value=!0)}),t(Fe,{templates:p(n),onCreateFromTemplate:p($)},null,8,["templates","onCreateFromTemplate"]),t(te,null,{default:e(()=>[t(ee,{cols:"12"},{default:e(()=>[t(h,{class:"glass-card"},{default:e(()=>[t(Y,{class:"d-flex align-center justify-space-between"},{default:e(()=>[C("div",null,[t(m,{class:"mr-2"},{default:e(()=>M[3]||(M[3]=[s(" mdi-map ",-1)])),_:1,__:[3]}),M[4]||(M[4]=s(" Mappings ",-1))]),C("div",Ae,[C("span",Ge,v(p(x))+" active, "+v(p(k))+" inactive ",1),t(X,{modelValue:p(g),"onUpdate:modelValue":M[1]||(M[1]=R=>P(g)?g.value=R:null),mandatory:""},{default:e(()=>[t(L,{value:"grid",size:"small"},{default:e(()=>[t(m,null,{default:e(()=>M[5]||(M[5]=[s("mdi-view-grid",-1)])),_:1,__:[5]})]),_:1}),t(L,{value:"list",size:"small"},{default:e(()=>[t(m,null,{default:e(()=>M[6]||(M[6]=[s("mdi-view-list",-1)])),_:1,__:[6]})]),_:1})]),_:1},8,["modelValue"])])]),_:1}),p(g)==="grid"?(b(),D(Be,{key:0,mappings:p(i),"get-mapping-color":p(_),"get-mapping-icon":p(r),"format-date":p(y),onEdit:p(V),onTest:p(S),onToggleStatus:p(I),onDuplicate:p(F),onDelete:p(u)},null,8,["mappings","get-mapping-color","get-mapping-icon","format-date","onEdit","onTest","onToggleStatus","onDuplicate","onDelete"])):(b(),D(qe,{key:1,mappings:p(i),"get-mapping-color":p(_),"get-mapping-icon":p(r),"format-date":p(y),onEdit:p(V),onTest:p(S),onToggleStatus:p(I),onDuplicate:p(F),onDelete:p(u)},null,8,["mappings","get-mapping-color","get-mapping-icon","format-date","onEdit","onTest","onToggleStatus","onDuplicate","onDelete"]))]),_:1})]),_:1})]),_:1}),t(Pe,{modelValue:p(f),"onUpdate:modelValue":M[2]||(M[2]=R=>P(f)?f.value=R:null),mapping:p(l),creating:p(d),onSave:p(c)},null,8,["modelValue","mapping","creating","onSave"])])}}});const Qe=U(He,[["__scopeId","data-v-d0eb947f"]]);export{Qe as default};
