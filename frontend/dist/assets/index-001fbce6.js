import{b as Ie,a as Je}from"./index-c29b4afb.js";import{g as M,u as ie,j as se,h as le}from"./apollo-9599811a.js";import{r as _,k as Le,c as T,v as W,a5 as n,a7 as R,a8 as j,a9 as t,A as e,E as A,W as V,_ as c,B as Te,ac as G,ae as ue,D as Fe,ad as re,F as de,w as Ue,u as U,a as Re}from"./vue-b3dbcb9b.js";import{_ as Y}from"./_plugin-vue_export-helper-c27b6911.js";import"./supabase-cf010ec4.js";const qe=M`
  query AgentJobs($orgId: ID!, $status: JobStatus, $type: JobType, $limit: Int, $offset: Int) {
    agentJobs(orgId: $orgId, status: $status, type: $type, limit: $limit, offset: $offset) {
      id
      orgId
      type
      target
      status
      priority
      attemptsMade
      retries
      worker
      startedAt
      finishedAt
      durationMs
      params
    }
  }
`,Ee=M`
  mutation EnqueueAgentJob($input: EnqueueAgentJobInput!) {
    enqueueAgentJob(input: $input) {
      id
      type
      status
    }
  }
`,ze=M`
  mutation CancelAgentJob($orgId: ID!, $id: ID!) {
    cancelAgentJob(orgId: $orgId, id: $id)
  }
`,Oe=M`
  subscription JobUpdated($orgId: ID!) {
    jobUpdated(orgId: $orgId) {
      id
      orgId
      type
      target
      status
      priority
      attemptsMade
      retries
      worker
      startedAt
      finishedAt
      durationMs
      params
    }
  }
`,je=M`
  subscription JobLogAppended($jobId: ID!) {
    jobLogAppended(jobId: $jobId) {
      jobId
      timestamp
      level
      message
    }
  }
`;function he(){var S;const C=Ie(),v=_([]),y=_({}),f=_({orgId:((S=C.currentOrg)==null?void 0:S.id)||"",limit:50,offset:0}),{onResult:m,refetch:p}=ie(qe,f);m(u=>{var s;(s=u.data)!=null&&s.agentJobs&&(v.value=u.data.agentJobs)}),Le(()=>{var u;f.value.orgId=((u=C.currentOrg)==null?void 0:u.id)||""});const{onResult:r}=se(Oe,()=>({orgId:f.value.orgId}));r(u=>{var a;const s=(a=u.data)==null?void 0:a.jobUpdated;if(s){const k=v.value.findIndex($=>$.id===s.id);k>=0?v.value.splice(k,1,s):v.value.unshift(s)}});const{mutate:g}=le(Ee),{mutate:J}=le(ze);function I(u){return g({input:u})}function l(u,s){return J({orgId:u,id:s})}function o(u){const{onResult:s}=se(je,{jobId:u});s(a=>{var $;const k=($=a.data)==null?void 0:$.jobLogAppended;k&&(y.value[u]=y.value[u]||[],y.value[u].push(k))})}return{jobs:v,logs:y,variables:f,refetch:p,enqueueJob:I,cancelJob:l,subscribeJobLogs:o}}const Be=M`
  query AgentHealth($orgId: ID!) {
    agentHealth(orgId: $orgId) {
      status
      agents
    }
    queues(orgId: $orgId) {
      name
      waiting
      active
      completed
      failed
      delayed
    }
  }
`;function oe(C){const v=_("unknown"),y=_([]),f=_([]),{onResult:m,refetch:p}=ie(Be,()=>({orgId:C.value}));return m(r=>{var g,J,I,l,o;v.value=((J=(g=r.data)==null?void 0:g.agentHealth)==null?void 0:J.status)??"unknown",y.value=((l=(I=r.data)==null?void 0:I.agentHealth)==null?void 0:l.agents)??[],f.value=((o=r.data)==null?void 0:o.queues)??[]}),{status:v,agents:y,queues:f,refetch:p}}function Ne(C){const v=_([{id:"1",name:"File Processor",description:"Processes uploaded files and extracts metadata",type:"file-processor",status:"active",tasksCompleted:124,tasksRunning:3,uptime:"2d 4h",lastActivity:"2023-05-15T14:30:00Z",created:"2023-05-10T09:15:00Z"},{id:"2",name:"Data Sync",description:"Synchronizes data with external systems",type:"data-sync",status:"active",tasksCompleted:87,tasksRunning:1,uptime:"1d 12h",lastActivity:"2023-05-15T14:25:00Z",created:"2023-05-12T11:30:00Z"},{id:"3",name:"Notification Service",description:"Sends notifications to users",type:"notification",status:"inactive",tasksCompleted:203,tasksRunning:0,uptime:"0h 0m",created:"2023-05-14T16:45:00Z"}]),y=_(!1),f=_(null),m=_(!1),p=_(""),r=_(null),g=_(null),J=T(()=>v.value.filter(d=>!(p.value&&!d.name.toLowerCase().includes(p.value.toLowerCase())&&!d.description.toLowerCase().includes(p.value.toLowerCase())||r.value&&d.status!==r.value||g.value&&d.type!==g.value)));function I(d){m.value=!0,setTimeout(()=>{const w={...d,id:(v.value.length+1).toString(),tasksCompleted:0,tasksRunning:0,uptime:"0h 0m",created:new Date().toISOString()};v.value.push(w),y.value=!1,m.value=!1,C({message:"Agent created successfully",type:"success"})},500)}function l(d){m.value=!0,setTimeout(()=>{const w=v.value.findIndex(F=>F.id===d.id);w!==-1&&(v.value[w]={...d},y.value=!1,m.value=!1,C({message:"Agent updated successfully",type:"success"}))},500)}function o(d){setTimeout(()=>{v.value=v.value.filter(w=>w.id!==d.id),C({message:"Agent deleted successfully",type:"success"})},500)}function S(d){const w=v.value.findIndex(F=>F.id===d.id);if(w!==-1){const F=d.status==="active"?"inactive":"active";v.value[w]={...d,status:F},C({message:`Agent ${F==="active"?"started":"stopped"} successfully`,type:"success"})}}function u(d){const w={...d,id:(v.value.length+1).toString(),name:`${d.name} (Copy)`,created:new Date().toISOString()};v.value.push(w),C({message:"Agent duplicated successfully",type:"success"})}function s(d){console.log("Viewing agent",d)}function a(d){f.value={...d},y.value=!0}function k(){f.value=null,y.value=!0}function $(d){switch(d){case"file-processor":return"blue";case"data-sync":return"green";case"notification":return"orange";case"backup":return"purple";case"analytics":return"teal";default:return"grey"}}function E(d){switch(d){case"file-processor":return"mdi-file-cog";case"data-sync":return"mdi-sync";case"notification":return"mdi-bell";case"backup":return"mdi-backup-restore";case"analytics":return"mdi-chart-line";default:return"mdi-robot"}}function q(d){switch(d){case"active":return"success";case"inactive":return"grey";case"error":return"error";case"paused":return"warning";default:return"grey"}}function x(d){return new Date(d).toLocaleString()}return{agents:v,showCreateDialog:y,editingAgent:f,saving:m,search:p,statusFilter:r,typeFilter:g,filteredAgents:J,createAgent:I,updateAgent:l,deleteAgent:o,toggleAgentStatus:S,duplicateAgent:u,viewAgent:s,editAgent:a,openCreateDialog:k,getAgentColor:$,getAgentIcon:E,getStatusColor:q,formatDateTime:x}}function Me(C,v,y,f){const m=_(""),p=_(null),r=_(null),g=T(()=>C.value.filter(a=>!(m.value&&!a.id.toLowerCase().includes(m.value.toLowerCase())&&!a.type.toLowerCase().includes(m.value.toLowerCase())&&!a.status.toLowerCase().includes(m.value.toLowerCase())||p.value&&a.status!==p.value||r.value&&a.type!==r.value))),J=_(!1);function I(){console.log("Refetching jobs")}function l(a){console.log("Canceling job",a.id)}function o(a){console.log("Opening logs for job",a.id)}function S(a){switch(a){case"completed":return"success";case"failed":return"error";case"active":return"info";case"waiting":return"warning";case"delayed":return"purple";default:return"grey"}}function u(a){return a<1e3?`${a}ms`:a<6e4?`${(a/1e3).toFixed(2)}s`:`${(a/6e4).toFixed(2)}m`}function s(a){return new Date(a).toLocaleString()}return{searchQuery:m,statusFilter:p,typeFilter:r,filteredJobs:g,loading:J,jobs:C,logs:v,refetchJobs:I,cancelJob:l,openLogs:o,subscribeJobLogs:y,getJobStatusColor:S,formatDuration:u,formatDate:s}}const Pe={class:"flex-grow-1"},Qe={class:"text-subtitle-1"},He={class:"text-body-2 mb-3"},Ze={class:"text-h6"},Ge={class:"text-h6"},We={class:"text-h6"},Ke={key:0,class:"text-caption text-medium-emphasis"},Xe=W({__name:"AgentCard",props:{agent:{},toggling:{}},emits:["view","edit","duplicate","delete","toggle"],setup(C){function v(l){switch(l){case"file-processor":return"blue";case"data-sync":return"green";case"notification":return"orange";case"backup":return"purple";case"analytics":return"teal";default:return"grey"}}function y(l){switch(l){case"file-processor":return"mdi-file-cog";case"data-sync":return"mdi-sync";case"notification":return"mdi-bell";case"backup":return"mdi-backup-restore";case"analytics":return"mdi-chart-line";default:return"mdi-robot"}}function f(l){switch(l){case"active":return"success";case"inactive":return"grey";case"error":return"error";case"paused":return"warning";default:return"grey"}}function m(l){return new Date(l).toLocaleString()}function p(l){}function r(l){}function g(l){}function J(l){}function I(l){}return(l,o)=>{const S=n("v-icon"),u=n("v-avatar"),s=n("v-chip"),a=n("v-btn"),k=n("v-list-item-title"),$=n("v-list-item"),E=n("v-divider"),q=n("v-list"),x=n("v-menu"),d=n("v-card-title"),w=n("v-col"),F=n("v-row"),h=n("v-card-text"),B=n("v-spacer"),N=n("v-card-actions"),L=n("v-card");return R(),j(L,{class:Fe(["agent-card",{active:l.agent.status==="active"}]),variant:"outlined"},{default:t(()=>[e(d,{class:"d-flex align-center"},{default:t(()=>[e(u,{color:v(l.agent.type),class:"mr-3",size:"40"},{default:t(()=>[e(S,{icon:y(l.agent.type)},null,8,["icon"])]),_:1},8,["color"]),A("div",Pe,[A("div",Qe,V(l.agent.name),1),e(s,{color:f(l.agent.status),size:"x-small",variant:"tonal"},{default:t(()=>[c(V(l.agent.status),1)]),_:1},8,["color"])]),e(x,null,{activator:t(({props:b})=>[e(a,Te(b,{icon:"mdi-dots-vertical",variant:"text",size:"small"}),null,16)]),default:t(()=>[e(q,null,{default:t(()=>[e($,{onClick:o[0]||(o[0]=b=>(l.agent,void 0))},{default:t(()=>[e(k,null,{default:t(()=>[e(S,{start:""},{default:t(()=>o[6]||(o[6]=[c(" mdi-eye ",-1)])),_:1,__:[6]}),o[7]||(o[7]=c(" View Details ",-1))]),_:1,__:[7]})]),_:1}),e($,{onClick:o[1]||(o[1]=b=>(l.agent,void 0))},{default:t(()=>[e(k,null,{default:t(()=>[e(S,{start:""},{default:t(()=>o[8]||(o[8]=[c(" mdi-pencil ",-1)])),_:1,__:[8]}),o[9]||(o[9]=c(" Edit ",-1))]),_:1,__:[9]})]),_:1}),e($,{onClick:o[2]||(o[2]=b=>(l.agent,void 0))},{default:t(()=>[e(k,null,{default:t(()=>[e(S,{start:""},{default:t(()=>o[10]||(o[10]=[c(" mdi-content-copy ",-1)])),_:1,__:[10]}),o[11]||(o[11]=c(" Duplicate ",-1))]),_:1,__:[11]})]),_:1}),e(E),e($,{class:"text-error",onClick:o[3]||(o[3]=b=>(l.agent,void 0))},{default:t(()=>[e(k,null,{default:t(()=>[e(S,{start:""},{default:t(()=>o[12]||(o[12]=[c(" mdi-delete ",-1)])),_:1,__:[12]}),o[13]||(o[13]=c(" Delete ",-1))]),_:1,__:[13]})]),_:1})]),_:1})]),_:1})]),_:1}),e(h,null,{default:t(()=>[A("p",He,V(l.agent.description),1),e(F,{class:"text-center mb-3"},{default:t(()=>[e(w,{cols:"4"},{default:t(()=>[A("div",Ze,V(l.agent.tasksCompleted),1),o[14]||(o[14]=A("div",{class:"text-caption text-medium-emphasis"}," Completed ",-1))]),_:1,__:[14]}),e(w,{cols:"4"},{default:t(()=>[A("div",Ge,V(l.agent.tasksRunning),1),o[15]||(o[15]=A("div",{class:"text-caption text-medium-emphasis"}," Running ",-1))]),_:1,__:[15]}),e(w,{cols:"4"},{default:t(()=>[A("div",We,V(l.agent.uptime),1),o[16]||(o[16]=A("div",{class:"text-caption text-medium-emphasis"}," Uptime ",-1))]),_:1,__:[16]})]),_:1}),l.agent.lastActivity?(R(),G("div",Ke," Last activity: "+V(m(l.agent.lastActivity)),1)):ue("",!0)]),_:1}),e(N,null,{default:t(()=>[e(a,{color:l.agent.status==="active"?"warning":"success",variant:"outlined",size:"small",loading:l.toggling===l.agent.id,onClick:o[4]||(o[4]=b=>(l.agent,void 0))},{default:t(()=>[c(V(l.agent.status==="active"?"Stop":"Start"),1)]),_:1},8,["color","loading"]),e(B),e(a,{color:"primary",variant:"flat",size:"small",onClick:o[5]||(o[5]=b=>(l.agent,void 0))},{default:t(()=>o[17]||(o[17]=[c(" View Details ",-1)])),_:1,__:[17]})]),_:1})]),_:1},8,["class"])}}});const Ye=Y(Xe,[["__scopeId","data-v-ac7e4e62"]]),et={class:"d-flex align-center"},tt=W({__name:"JobsTable",props:{jobs:{},loading:{type:Boolean}},emits:["refresh","open-logs","cancel-job"],setup(C,{emit:v}){const y=C,f=v,m=_(""),p=_({status:null,type:null}),r=[{title:"Type",key:"type"},{title:"Target",key:"target"},{title:"Status",key:"status"},{title:"Started",key:"startedAt"},{title:"Duration",key:"durationMs"},{title:"Actions",key:"actions",sortable:!1}],g=T(()=>y.jobs.filter(s=>!(m.value&&!s.target.toLowerCase().includes(m.value.toLowerCase())||p.value.status&&s.status!==p.value.status||p.value.type&&s.type!==p.value.type)));function J(s){switch(s){case"queued":return"info";case"active":return"primary";case"completed":return"success";case"failed":return"error";default:return"grey"}}function I(s){return new Date(s).toLocaleString()}function l(s){return s<1e3?`${s}ms`:s<6e4?`${(s/1e3).toFixed(1)}s`:`${(s/6e4).toFixed(1)}m`}function o(){f("refresh")}function S(s){f("open-logs",s)}function u(s){f("cancel-job",s)}return(s,a)=>{const k=n("v-spacer"),$=n("v-text-field"),E=n("v-card-title"),q=n("v-select"),x=n("v-col"),d=n("v-icon"),w=n("v-btn"),F=n("v-row"),h=n("v-chip"),B=n("v-data-table"),N=n("v-card-text"),L=n("v-card");return R(),j(L,null,{default:t(()=>[e(E,null,{default:t(()=>[A("div",et,[a[3]||(a[3]=A("span",null,"Job Queue",-1)),e(k),e($,{modelValue:m.value,"onUpdate:modelValue":a[0]||(a[0]=b=>m.value=b),label:"Search jobs","prepend-inner-icon":"mdi-magnify",variant:"outlined",density:"compact","hide-details":"",class:"max-w-200"},null,8,["modelValue"])])]),_:1}),e(N,null,{default:t(()=>[e(F,{class:"mb-4"},{default:t(()=>[e(x,{cols:"12",md:"4"},{default:t(()=>[e(q,{modelValue:p.value.status,"onUpdate:modelValue":a[1]||(a[1]=b=>p.value.status=b),items:[{title:"All Statuses",value:null},{title:"Queued",value:"queued"},{title:"Active",value:"active"},{title:"Completed",value:"completed"},{title:"Failed",value:"failed"}],label:"Status",variant:"outlined",density:"compact","hide-details":""},null,8,["modelValue"])]),_:1}),e(x,{cols:"12",md:"4"},{default:t(()=>[e(q,{modelValue:p.value.type,"onUpdate:modelValue":a[2]||(a[2]=b=>p.value.type=b),items:[{title:"All Types",value:null},{title:"File Processing",value:"file-processing"},{title:"Data Sync",value:"data-sync"},{title:"Notification",value:"notification"},{title:"Backup",value:"backup"}],label:"Type",variant:"outlined",density:"compact","hide-details":""},null,8,["modelValue"])]),_:1}),e(x,{cols:"12",md:"4"},{default:t(()=>[e(w,{color:"primary",variant:"outlined",block:"",onClick:o},{default:t(()=>[e(d,{start:""},{default:t(()=>a[4]||(a[4]=[c(" mdi-refresh ",-1)])),_:1,__:[4]}),a[5]||(a[5]=c(" Refresh ",-1))]),_:1,__:[5]})]),_:1})]),_:1}),e(B,{headers:r,items:g.value,loading:s.loading,"items-per-page":10,"item-value":"id",class:"elevation-1"},{"item.status":t(({item:b})=>[e(h,{color:J(b.status),size:"small",variant:"tonal"},{default:t(()=>[c(V(b.status),1)]),_:2},1032,["color"])]),"item.startedAt":t(({item:b})=>[c(V(I(b.startedAt)),1)]),"item.durationMs":t(({item:b})=>[c(V(l(b.durationMs)),1)]),"item.actions":t(({item:b})=>[e(w,{color:"primary",variant:"text",size:"small",onClick:K=>S(b)},{default:t(()=>[e(d,{start:""},{default:t(()=>a[6]||(a[6]=[c(" mdi-file-document ",-1)])),_:1,__:[6]}),a[7]||(a[7]=c(" Logs ",-1))]),_:2,__:[7]},1032,["onClick"]),b.status==="active"||b.status==="queued"?(R(),j(w,{key:0,color:"warning",variant:"text",size:"small",onClick:K=>u(b)},{default:t(()=>[e(d,{start:""},{default:t(()=>a[8]||(a[8]=[c(" mdi-cancel ",-1)])),_:1,__:[8]}),a[9]||(a[9]=c(" Cancel ",-1))]),_:2,__:[9]},1032,["onClick"])):ue("",!0)]),_:1},8,["items","loading"])]),_:1})]),_:1})}}});const nt=Y(tt,[["__scopeId","data-v-3f9c7b11"]]),at={key:1,class:"text-medium-emphasis"},st=W({__name:"LogsDialog",props:{modelValue:{type:Boolean},logs:{}},emits:["update:modelValue"],setup(C,{emit:v}){const y=C,f=v,m=T({get:()=>y.modelValue,set:r=>f("update:modelValue",r)});function p(){f("update:modelValue",!1)}return(r,g)=>{const J=n("v-card-title"),I=n("v-chip"),l=n("v-list-item-title"),o=n("v-list-item-subtitle"),S=n("v-list-item"),u=n("v-list"),s=n("v-card-text"),a=n("v-spacer"),k=n("v-btn"),$=n("v-card-actions"),E=n("v-card"),q=n("v-dialog");return R(),j(q,{modelValue:m.value,"onUpdate:modelValue":g[0]||(g[0]=x=>m.value=x),"max-width":"800",persistent:""},{default:t(()=>[e(E,null,{default:t(()=>[e(J,null,{default:t(()=>g[1]||(g[1]=[c("Job Logs",-1)])),_:1,__:[1]}),e(s,{style:{"max-height":"60vh",overflow:"auto"}},{default:t(()=>[r.logs.length?(R(),j(u,{key:0},{default:t(()=>[(R(!0),G(de,null,re(r.logs,x=>(R(),j(S,{key:x.timestamp+x.message},{default:t(()=>[e(l,null,{default:t(()=>[A("strong",null,V(new Date(x.timestamp).toLocaleString()),1),e(I,{color:x.level==="error"?"error":x.level==="warn"?"warning":"info",size:"x-small",class:"ml-2",variant:"tonal"},{default:t(()=>[c(V(x.level),1)]),_:2},1032,["color"])]),_:2},1024),e(o,{class:"mt-1"},{default:t(()=>[c(V(x.message),1)]),_:2},1024)]),_:2},1024))),128))]),_:1})):(R(),G("div",at," No logs available for this job. "))]),_:1}),e($,null,{default:t(()=>[e(a),e(k,{onClick:p},{default:t(()=>g[2]||(g[2]=[c("Close",-1)])),_:1,__:[2]})]),_:1})]),_:1})]),_:1},8,["modelValue"])}}}),lt=W({__name:"CreateAgentDialog",props:{modelValue:{type:Boolean},agent:{},saving:{type:Boolean}},emits:["update:modelValue","save"],setup(C,{emit:v}){const y=C,f=v,m=_(),p=_(!1),r=_({id:"",name:"",description:"",type:"file-processor",status:"inactive",tasksCompleted:0,tasksRunning:0,uptime:"0h 0m",created:new Date().toISOString()}),g=T(()=>{var u;return!!((u=y.agent)!=null&&u.id)}),J=[{title:"File Processor",value:"file-processor"},{title:"Data Sync",value:"data-sync"},{title:"Notification",value:"notification"},{title:"Backup",value:"backup"},{title:"Analytics",value:"analytics"}],I=u=>!!u||"This field is required";Ue(()=>y.agent,u=>{u?r.value={...u}:r.value={id:"",name:"",description:"",type:"file-processor",status:"inactive",tasksCompleted:0,tasksRunning:0,uptime:"0h 0m",created:new Date().toISOString()}},{immediate:!0});const l=T({get:()=>y.modelValue,set:u=>f("update:modelValue",u)});function o(){f("update:modelValue",!1)}function S(){m.value.validate()&&f("save",r.value)}return(u,s)=>{const a=n("v-card-title"),k=n("v-text-field"),$=n("v-textarea"),E=n("v-select"),q=n("v-switch"),x=n("v-form"),d=n("v-card-text"),w=n("v-btn"),F=n("v-spacer"),h=n("v-card-actions"),B=n("v-card"),N=n("v-dialog");return R(),j(N,{modelValue:l.value,"onUpdate:modelValue":s[5]||(s[5]=L=>l.value=L),"max-width":"600",persistent:""},{default:t(()=>[e(B,null,{default:t(()=>[e(a,null,{default:t(()=>[c(V(g.value?"Edit Agent":"Create New Agent"),1)]),_:1}),e(d,null,{default:t(()=>[e(x,{ref_key:"form",ref:m,modelValue:p.value,"onUpdate:modelValue":s[4]||(s[4]=L=>p.value=L)},{default:t(()=>[e(k,{modelValue:r.value.name,"onUpdate:modelValue":s[0]||(s[0]=L=>r.value.name=L),label:"Agent Name",rules:[I],required:""},null,8,["modelValue","rules"]),e($,{modelValue:r.value.description,"onUpdate:modelValue":s[1]||(s[1]=L=>r.value.description=L),label:"Description",rows:"3"},null,8,["modelValue"]),e(E,{modelValue:r.value.type,"onUpdate:modelValue":s[2]||(s[2]=L=>r.value.type=L),items:J,label:"Agent Type",rules:[I],required:""},null,8,["modelValue","rules"]),e(q,{modelValue:r.value.status,"onUpdate:modelValue":s[3]||(s[3]=L=>r.value.status=L),label:`Status: ${r.value.status==="active"?"Active":"Inactive"}`,"true-value":"active","false-value":"inactive"},null,8,["modelValue","label"])]),_:1},8,["modelValue"])]),_:1}),e(h,null,{default:t(()=>[e(w,{onClick:o},{default:t(()=>s[6]||(s[6]=[c("Cancel",-1)])),_:1,__:[6]}),e(F),e(w,{color:"primary",loading:u.saving,disabled:!p.value,onClick:S},{default:t(()=>[c(V(g.value?"Update":"Create"),1)]),_:1},8,["loading","disabled"])]),_:1})]),_:1})]),_:1},8,["modelValue"])}}}),ot={class:"text-h4"},it={class:"text-h4"},ut={class:"text-h4"},rt={class:"text-h4"},dt={class:"d-flex align-center gap-2"},ct=W({__name:"index",setup(C){const v=Je(),{jobs:y,logs:f,subscribeJobLogs:m,cancel:p}=he();oe();const{agents:r,showCreateDialog:g,editingAgent:J,saving:I,search:l,statusFilter:o,typeFilter:S,filteredAgents:u,createAgent:s,updateAgent:a,deleteAgent:k,toggleAgentStatus:$,duplicateAgent:E,viewAgent:q,editAgent:x,openCreateDialog:d,getAgentColor:w,getAgentIcon:F,getStatusColor:h,formatDateTime:B}=Ne(v.addNotification),{searchQuery:N,statusFilter:L,typeFilter:b,filteredJobs:K,loading:vt,refetchJobs:ce,cancelJob:ve,openLogs:me,getJobStatusColor:mt,formatDuration:pt,formatDate:gt}=Me(y,f,m),ee=_(!1),pe=_(null),te=_(""),ne=_(""),ge=T(()=>r.value.filter(D=>D.status==="active").length);T(()=>r.value.reduce((D,i)=>D+i.tasksRunning,0)),T(()=>r.value.reduce((D,i)=>D+i.tasksCompleted,0)),T(()=>r.value.reduce((D,i)=>D+i.tasksFailed,0));const _e=[{title:"Active",value:"active"},{title:"Inactive",value:"inactive"},{title:"Error",value:"error"},{title:"Paused",value:"paused"}],fe=useOrganizationStore(),ye=T(()=>{var D;return((D=fe.currentOrg)==null?void 0:D.id)||""}),{status:_t,queues:X}=oe(ye),be=T(()=>X.value.reduce((D,i)=>D+(i.active||0),0)),Ae=T(()=>X.value.reduce((D,i)=>D+(i.waiting||0),0)),we=T(()=>X.value.reduce((D,i)=>D+(i.failed||0),0)),ae=_(null);_(new Set);const Ce=T(()=>ae.value?f.value[ae.value]||[]:[]),xe=_(!1);function ke(D){console.log("Saving agent",D),g.value=!1}return(D,i)=>{const O=n("v-col"),Ve=n("v-btn"),P=n("v-row"),Q=n("v-icon"),H=n("v-card-text"),Z=n("v-card"),Se=n("v-text-field"),$e=n("v-select"),De=n("v-card-title");return R(),G("div",null,[e(P,{class:"mb-4"},{default:t(()=>[e(O,{cols:"12",md:"8"},{default:t(()=>i[5]||(i[5]=[A("h1",{class:"text-h4 font-weight-bold"}," Agent Console ",-1),A("p",{class:"text-subtitle-1 text-medium-emphasis"}," Manage and monitor AI agents and automation workflows ",-1)])),_:1,__:[5]}),e(O,{cols:"12",md:"4",class:"text-right"},{default:t(()=>[e(Ve,{color:"primary","prepend-icon":"mdi-plus",class:"liquid-button",onClick:i[0]||(i[0]=z=>g.value=!0)},{default:t(()=>i[6]||(i[6]=[c(" Create Agent ",-1)])),_:1,__:[6]})]),_:1})]),_:1}),e(P,{class:"mb-6"},{default:t(()=>[e(O,{cols:"12",md:"3"},{default:t(()=>[e(Z,{class:"glass-card"},{default:t(()=>[e(H,{class:"text-center"},{default:t(()=>[e(Q,{size:"48",color:"success",class:"mb-2"},{default:t(()=>i[7]||(i[7]=[c(" mdi-robot ",-1)])),_:1,__:[7]}),A("div",ot,V(ge.value),1),i[8]||(i[8]=A("div",{class:"text-subtitle-2 text-medium-emphasis"}," Active Agents ",-1))]),_:1,__:[8]})]),_:1})]),_:1}),e(O,{cols:"12",md:"3"},{default:t(()=>[e(Z,{class:"glass-card"},{default:t(()=>[e(H,{class:"text-center"},{default:t(()=>[e(Q,{size:"48",color:"primary",class:"mb-2"},{default:t(()=>i[9]||(i[9]=[c(" mdi-play ",-1)])),_:1,__:[9]}),A("div",it,V(be.value),1),i[10]||(i[10]=A("div",{class:"text-subtitle-2 text-medium-emphasis"}," Running Tasks ",-1))]),_:1,__:[10]})]),_:1})]),_:1}),e(O,{cols:"12",md:"3"},{default:t(()=>[e(Z,null,{default:t(()=>[e(H,{class:"text-center"},{default:t(()=>[e(Q,{size:"48",color:"warning",class:"mb-2"},{default:t(()=>i[11]||(i[11]=[c(" mdi-clock ",-1)])),_:1,__:[11]}),A("div",ut,V(Ae.value),1),i[12]||(i[12]=A("div",{class:"text-subtitle-2 text-medium-emphasis"}," Queued Tasks ",-1))]),_:1,__:[12]})]),_:1})]),_:1}),e(O,{cols:"12",md:"3"},{default:t(()=>[e(Z,null,{default:t(()=>[e(H,{class:"text-center"},{default:t(()=>[e(Q,{size:"48",color:"error",class:"mb-2"},{default:t(()=>i[13]||(i[13]=[c(" mdi-alert ",-1)])),_:1,__:[13]}),A("div",rt,V(we.value),1),i[14]||(i[14]=A("div",{class:"text-subtitle-2 text-medium-emphasis"}," Failed Tasks ",-1))]),_:1,__:[14]})]),_:1})]),_:1})]),_:1}),e(P,null,{default:t(()=>[e(O,{cols:"12"},{default:t(()=>[e(Z,null,{default:t(()=>[e(De,{class:"d-flex align-center justify-space-between"},{default:t(()=>[A("div",null,[e(Q,{class:"mr-2"},{default:t(()=>i[15]||(i[15]=[c(" mdi-robot ",-1)])),_:1,__:[15]}),i[16]||(i[16]=c(" AI Agents ",-1))]),A("div",dt,[e(Se,{modelValue:te.value,"onUpdate:modelValue":i[1]||(i[1]=z=>te.value=z),"prepend-inner-icon":"mdi-magnify",label:"Search agents...",variant:"outlined",density:"compact","hide-details":"",clearable:"",style:{width:"250px"}},null,8,["modelValue"]),e($e,{modelValue:ne.value,"onUpdate:modelValue":i[2]||(i[2]=z=>ne.value=z),items:_e,label:"Filter by status",variant:"outlined",density:"compact","hide-details":"",clearable:"",style:{width:"150px"}},null,8,["modelValue"])])]),_:1}),e(H,null,{default:t(()=>[e(P,null,{default:t(()=>[(R(!0),G(de,null,re(U(u),z=>(R(),j(O,{key:z.id,cols:"12",md:"6",lg:"4"},{default:t(()=>[e(Ye,{agent:z,toggling:pe.value,onView:U(q),onEdit:U(x),onDuplicate:U(E),onDelete:U(k),onToggle:U($)},null,8,["agent","toggling","onView","onEdit","onDuplicate","onDelete","onToggle"])]),_:2},1024))),128))]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),e(P,{class:"mt-4"},{default:t(()=>[e(O,{cols:"12"},{default:t(()=>[e(nt,{jobs:U(K),loading:xe.value,onRefresh:U(ce),onOpenLogs:U(me),onCancelJob:U(ve)},null,8,["jobs","loading","onRefresh","onOpenLogs","onCancelJob"])]),_:1})]),_:1}),e(st,{modelValue:ee.value,"onUpdate:modelValue":i[3]||(i[3]=z=>ee.value=z),logs:Ce.value},null,8,["modelValue","logs"]),e(lt,{modelValue:U(g),"onUpdate:modelValue":i[4]||(i[4]=z=>Re(g)?g.value=z:null),agent:U(J),saving:U(I),onSave:ke},null,8,["modelValue","agent","saving"])])}}});const Ct=Y(ct,[["__scopeId","data-v-801dfe6e"]]);export{Ct as default};
