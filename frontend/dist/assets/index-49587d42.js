import{r as b,aj as C,M as z,v as w,a5 as n,a7 as P,a8 as R,a9 as l,A as o,E as O,_ as S,a3 as F,ac as D,u as _,a as k}from"./vue-b3dbcb9b.js";import{c as E,u as H,a as G}from"./index-c29b4afb.js";import{_ as A}from"./_plugin-vue_export-helper-c27b6911.js";import"./apollo-9599811a.js";import"./supabase-cf010ec4.js";const y=b("profile"),g=E(),U=H(),J=C();var I,M;const K=b({name:((I=g.user)==null?void 0:I.name)||"",avatar:((M=g.user)==null?void 0:M.avatar)||""});var $,B,q;const Q=b({email:(($=g.notificationPrefs)==null?void 0:$.email)||!1,sms:((B=g.notificationPrefs)==null?void 0:B.sms)||!1,inApp:((q=g.notificationPrefs)==null?void 0:q.inApp)||!1}),N=b({name:"",templates:[],autoApprove:!1}),x=[a=>!!a||"Name is required"],W=[a=>!a||/^https?:\/\//.test(a)||"Must be a valid URL"];async function X(){var s,i;U.projects.length||await U.fetchProjects();const a=U.projects.find(u=>u.id===J.params.id);a&&(N.value.name=a.name,N.value.templates=((s=a.settings)==null?void 0:s.templates)||[],N.value.autoApprove=((i=a.settings)==null?void 0:i.autoApprove)||!1)}function Y(){z(async()=>{await X()})}const L=E(),j=G(),Z=H();async function h(a){try{await L.updateProfile(a),j.add("success","Profile updated")}catch(s){throw j.add("error","Failed to update profile"),s}}async function ee(a){try{await L.updateNotificationPrefs(a),j.add("success","Notification preferences saved")}catch(s){throw j.add("error","Failed to save notifications"),s}}async function te(a,s){try{await Z.updateProjectOptions(a,{name:s.name,templates:s.templates,autoApprove:s.autoApprove}),j.add("success","Project settings saved")}catch(i){throw j.add("error","Failed to save project settings"),i}}const oe=w({__name:"SettingsHeader",setup(a){return(s,i)=>{const u=n("v-col"),p=n("v-row");return P(),R(p,{class:"mb-4"},{default:l(()=>[o(u,{cols:"12"},{default:l(()=>i[0]||(i[0]=[O("h1",{class:"text-h4 font-weight-bold"},"Settings",-1),O("p",{class:"text-subtitle-1 text-medium-emphasis"},"Manage your profile, notifications, and project settings",-1)])),_:1,__:[0]})]),_:1})}}});const ae=A(oe,[["__scopeId","data-v-b64c2694"]]),ne=w({__name:"ProfileSettings",props:{profile:{},nameRules:{},urlRules:{}},emits:["save"],setup(a,{emit:s}){const i=a,u=s,p=b();async function r(){const{valid:e}=await p.value.validate();e&&u("save",i.profile)}return(e,t)=>{const m=n("v-text-field"),d=n("v-btn"),v=n("v-card"),f=n("v-form");return P(),R(f,{ref_key:"profileForm",ref:p,onSubmit:F(r,["prevent"])},{default:l(()=>[o(v,{class:"glass-card pa-4 mb-4"},{default:l(()=>[o(m,{modelValue:e.profile.name,"onUpdate:modelValue":t[0]||(t[0]=c=>e.profile.name=c),label:"Name",rules:e.nameRules,required:""},null,8,["modelValue","rules"]),o(m,{modelValue:e.profile.avatar,"onUpdate:modelValue":t[1]||(t[1]=c=>e.profile.avatar=c),label:"Avatar URL",rules:e.urlRules},null,8,["modelValue","rules"]),o(d,{type:"submit",color:"primary"},{default:l(()=>t[2]||(t[2]=[S(" Save ",-1)])),_:1,__:[2]})]),_:1})]),_:1},512)}}});const se=A(ne,[["__scopeId","data-v-84003ac3"]]),le=w({__name:"NotificationSettings",props:{notif:{}},emits:["save"],setup(a,{emit:s}){const i=a,u=s,p=b();async function r(){u("save",i.notif)}return(e,t)=>{const m=n("v-switch"),d=n("v-btn"),v=n("v-card"),f=n("v-form");return P(),R(f,{ref_key:"notifForm",ref:p,onSubmit:F(r,["prevent"])},{default:l(()=>[o(v,{class:"glass-card pa-4 mb-4"},{default:l(()=>[o(m,{modelValue:e.notif.email,"onUpdate:modelValue":t[0]||(t[0]=c=>e.notif.email=c),label:"Email"},null,8,["modelValue"]),o(m,{modelValue:e.notif.sms,"onUpdate:modelValue":t[1]||(t[1]=c=>e.notif.sms=c),label:"SMS"},null,8,["modelValue"]),o(m,{modelValue:e.notif.inApp,"onUpdate:modelValue":t[2]||(t[2]=c=>e.notif.inApp=c),label:"In-App"},null,8,["modelValue"]),o(d,{type:"submit",color:"primary"},{default:l(()=>t[3]||(t[3]=[S(" Save ",-1)])),_:1,__:[3]})]),_:1})]),_:1},512)}}});const ie=A(le,[["__scopeId","data-v-cec11fb7"]]),re=w({__name:"ProjectSettings",props:{projectOptions:{},nameRules:{}},emits:["save"],setup(a,{emit:s}){const i=a,u=s,p=b();async function r(){const{valid:e}=await p.value.validate();e&&u("save",i.projectOptions)}return(e,t)=>{const m=n("v-text-field"),d=n("v-combobox"),v=n("v-switch"),f=n("v-btn"),c=n("v-card"),T=n("v-form");return P(),R(T,{ref_key:"projectForm",ref:p,onSubmit:F(r,["prevent"])},{default:l(()=>[o(c,{class:"glass-card pa-4 mb-4"},{default:l(()=>[o(m,{modelValue:e.projectOptions.name,"onUpdate:modelValue":t[0]||(t[0]=V=>e.projectOptions.name=V),label:"Project Name",rules:e.nameRules,required:""},null,8,["modelValue","rules"]),o(d,{modelValue:e.projectOptions.templates,"onUpdate:modelValue":t[1]||(t[1]=V=>e.projectOptions.templates=V),label:"Templates",multiple:"",chips:"","hide-selected":""},null,8,["modelValue"]),o(v,{modelValue:e.projectOptions.autoApprove,"onUpdate:modelValue":t[2]||(t[2]=V=>e.projectOptions.autoApprove=V),label:"Auto-approve tasks"},null,8,["modelValue"]),o(f,{type:"submit",color:"primary"},{default:l(()=>t[3]||(t[3]=[S(" Save ",-1)])),_:1,__:[3]})]),_:1})]),_:1},512)}}});const ue=A(re,[["__scopeId","data-v-8839993c"]]),pe=w({__name:"index",setup(a){Y();const s=C();async function i(r){await h(r)}async function u(r){await ee(r)}async function p(r){await te(s.params.id,r)}return(r,e)=>{const t=n("v-tab"),m=n("v-tabs"),d=n("v-window-item"),v=n("v-window");return P(),D("div",null,[o(ae),o(m,{modelValue:_(y),"onUpdate:modelValue":e[0]||(e[0]=f=>k(y)?y.value=f:null),density:"compact",class:"mb-4"},{default:l(()=>[o(t,{value:"profile"},{default:l(()=>e[2]||(e[2]=[S("Profile",-1)])),_:1,__:[2]}),o(t,{value:"notifications"},{default:l(()=>e[3]||(e[3]=[S("Notifications",-1)])),_:1,__:[3]}),o(t,{value:"project"},{default:l(()=>e[4]||(e[4]=[S("Project",-1)])),_:1,__:[4]})]),_:1},8,["modelValue"]),o(v,{modelValue:_(y),"onUpdate:modelValue":e[1]||(e[1]=f=>k(y)?y.value=f:null)},{default:l(()=>[o(d,{value:"profile"},{default:l(()=>[o(se,{profile:_(K),"name-rules":_(x),"url-rules":_(W),onSave:i},null,8,["profile","name-rules","url-rules"])]),_:1}),o(d,{value:"notifications"},{default:l(()=>[o(ie,{notif:_(Q),onSave:u},null,8,["notif"])]),_:1}),o(d,{value:"project"},{default:l(()=>[o(ue,{"project-options":_(N),"name-rules":_(x),onSave:p},null,8,["project-options","name-rules"])]),_:1})]),_:1},8,["modelValue"])])}}});const ve=A(pe,[["__scopeId","data-v-e8bfa4ed"]]);export{ve as default};
