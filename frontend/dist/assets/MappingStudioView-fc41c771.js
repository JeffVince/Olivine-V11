import{r as T,c as G,v as j,a7 as D,a8 as e,a4 as n,a6 as b,A as t,E as C,_ as l,ab as B,ac as H,F as Z,W as v,D as ae,ad as ne,B as O,w as oe,M as le,u as p,a as P}from"./vue-3f691d55.js";import{a as se}from"./index-cc140e55.js";import{_ as U}from"./_plugin-vue_export-helper-c27b6911.js";import"./apollo-30a378f4.js";import"./supabase-cf010ec4.js";const E=T([]),ie=T([{id:"1",name:"File Metadata",description:"Map file properties like name, size, and timestamps",type:"file-metadata",icon:"mdi-file",color:"blue"},{id:"2",name:"User Directory",description:"Map user directory structures and permissions",type:"user-directory",icon:"mdi-account-group",color:"green"},{id:"3",name:"Project Structure",description:"Map project folder hierarchies and organization",type:"project-structure",icon:"mdi-folder-multiple",color:"orange"}]),re=T({name:"",description:"",type:"",sourceType:""}),pe=T(!1),ue=T(!1),de=T("grid"),ce=G(()=>E.value.filter(o=>o.status==="active").length),me=G(()=>E.value.filter(o=>o.status==="inactive").length);function W(){return{mappings:E,mappingTemplates:ie,newMapping:re,showCreateDialog:pe,creating:ue,viewMode:de,activeMappingsCount:ce,inactiveMappingsCount:me}}const V=se(),{mappings:N,newMapping:J,showCreateDialog:K,creating:A}=W();function _e(o){switch(o){case"file-metadata":return"blue";case"user-directory":return"green";case"project-structure":return"orange";case"asset-metadata":return"purple";default:return"grey"}}function ve(o){switch(o){case"file-metadata":return"mdi-file";case"user-directory":return"mdi-account-group";case"project-structure":return"mdi-folder-multiple";case"asset-metadata":return"mdi-image-multiple";default:return"mdi-map"}}function fe(o){return new Date(o).toLocaleDateString()}async function ge(o){A.value=!0;try{await new Promise(a=>setTimeout(a,1e3));const s={id:Date.now().toString(),name:o.name,description:o.description,type:o.type,status:"inactive",fieldCount:0,transformCount:0};N.value.push(s),K.value=!1,J.value={name:"",description:"",type:"",sourceType:""},V.add("success","Mapping created successfully")}catch{V.add("error","Failed to create mapping")}finally{A.value=!1}}function ye(o){J.value={name:`${o.name} Mapping`,description:o.description,type:o.type,sourceType:"dropbox"},K.value=!0}function Q(o){V.add("info",`Opening editor for ${o.name}`)}function Me(o){Q(o)}async function Ce(o){try{await new Promise(s=>setTimeout(s,2e3)),V.add("success",`Test completed for ${o.name}`)}catch{V.add("error",`Test failed for ${o.name}`)}}function be(o){const s={...o,id:Date.now().toString(),name:`${o.name} (Copy)`,status:"inactive"};N.value.push(s),V.add("success","Mapping duplicated successfully")}function $e(o){o.status=o.status==="active"?"inactive":"active",V.add("info",`Mapping ${o.status==="active"?"activated":"deactivated"}`)}function xe(o){const s=N.value.findIndex(a=>a.id===o.id);s>-1&&(N.value.splice(s,1),V.add("info","Mapping deleted"))}function ke(){N.value=[{id:"1",name:"Dropbox File Metadata",description:"Maps Dropbox file properties to project database",type:"file-metadata",status:"active",fieldCount:6,transformCount:3,lastRun:"2024-01-15T10:30:00Z"},{id:"2",name:"User Directory Structure",description:"Maps user directory hierarchies and permissions",type:"user-directory",status:"inactive",fieldCount:4,transformCount:2},{id:"3",name:"Project Asset Metadata",description:"Maps asset metadata for project organization",type:"asset-metadata",status:"active",fieldCount:8,transformCount:5,lastRun:"2024-01-14T15:45:00Z"}]}function we(){return{getMappingColor:_e,getMappingIcon:ve,formatDate:fe,createMapping:ge,createFromTemplate:ye,editMapping:Q,openMappingEditor:Me,testMapping:Ce,duplicateMapping:be,toggleMappingStatus:$e,deleteMapping:xe,initializeMappings:ke}}const Te=j({__name:"MappingStudioHeader",emits:["create-mapping"],setup(o){return(s,a)=>{const r=n("v-col"),f=n("v-btn"),d=n("v-row");return b(),D(d,{class:"mb-4"},{default:e(()=>[t(r,{cols:"12",md:"8"},{default:e(()=>a[1]||(a[1]=[C("h1",{class:"text-h4 font-weight-bold"}," Mapping Studio ",-1),C("p",{class:"text-subtitle-1 text-medium-emphasis"}," Configure data transformations and field mappings ",-1)])),_:1,__:[1]}),t(r,{cols:"12",md:"4",class:"text-right"},{default:e(()=>[t(f,{color:"primary","prepend-icon":"mdi-plus",class:"liquid-button",onClick:a[0]||(a[0]=y=>s.$emit("create-mapping"))},{default:e(()=>a[2]||(a[2]=[l(" Create Mapping ",-1)])),_:1,__:[2]})]),_:1})]),_:1})}}});const De=U(Te,[["__scopeId","data-v-45ef2645"]]),Ve={class:"text-h6 mb-1"},ze={class:"text-caption text-medium-emphasis mb-2"},Se=j({__name:"MappingTemplates",props:{templates:{}},emits:["create-from-template"],setup(o){return(s,a)=>{const r=n("v-icon"),f=n("v-card-title"),d=n("v-avatar"),y=n("v-chip"),x=n("v-card-text"),k=n("v-card"),_=n("v-col"),i=n("v-row");return b(),D(i,{class:"mb-6"},{default:e(()=>[t(_,{cols:"12"},{default:e(()=>[t(k,{class:"glass-card"},{default:e(()=>[t(f,null,{default:e(()=>[t(r,{class:"mr-2"},{default:e(()=>a[0]||(a[0]=[l(" mdi-file-document-multiple ",-1)])),_:1,__:[0]}),a[1]||(a[1]=l(" Mapping Templates ",-1))]),_:1,__:[1]}),t(x,null,{default:e(()=>[t(i,null,{default:e(()=>[(b(!0),B(Z,null,H(s.templates,g=>(b(),D(_,{key:g.id,cols:"12",sm:"6",md:"4"},{default:e(()=>[t(k,{variant:"outlined",class:"template-card glass-card",onClick:c=>s.$emit("create-from-template",g)},{default:e(()=>[t(x,{class:"text-center pa-4"},{default:e(()=>[t(d,{color:g.color,size:"48",class:"mb-3"},{default:e(()=>[t(r,{color:"white",size:"24"},{default:e(()=>[l(v(g.icon),1)]),_:2},1024)]),_:2},1032,["color"]),C("h3",Ve,v(g.name),1),C("p",ze,v(g.description),1),t(y,{size:"small",variant:"tonal",class:"mb-2"},{default:e(()=>[l(v(g.type),1)]),_:2},1024)]),_:2},1024)]),_:2},1032,["onClick"])]),_:2},1024))),128))]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})}}});const Fe=U(Se,[["__scopeId","data-v-d3d52e03"]]),Ie={class:"text-truncate"},je={class:"text-medium-emphasis text-caption mb-3"},Ue={class:"d-flex align-center text-caption mb-2"},Ne={key:0,class:"d-flex align-center text-caption"},Re=j({__name:"MappingGrid",props:{mappings:{},getMappingColor:{type:Function},getMappingIcon:{type:Function},formatDate:{type:Function}},emits:["edit","test","toggle-status","duplicate","delete"],setup(o){return(s,a)=>{const r=n("v-icon"),f=n("v-avatar"),d=n("v-spacer"),y=n("v-chip"),x=n("v-card-title"),k=n("v-card-text"),_=n("v-btn"),i=n("v-list-item-title"),g=n("v-list-item"),c=n("v-list"),$=n("v-menu"),z=n("v-card-actions"),S=n("v-card"),F=n("v-col"),I=n("v-row");return b(),D(I,null,{default:e(()=>[(b(!0),B(Z,null,H(s.mappings,u=>(b(),D(F,{key:u.id,cols:"12",md:"6",lg:"4"},{default:e(()=>[t(S,{class:ae(["mapping-card glass-card",{"border-success":u.status==="active"}])},{default:e(()=>[t(x,{class:"d-flex align-center"},{default:e(()=>[t(f,{color:s.getMappingColor(u.type),size:"36",class:"mr-3"},{default:e(()=>[t(r,{color:"white",size:"18"},{default:e(()=>[l(v(s.getMappingIcon(u.type)),1)]),_:2},1024)]),_:2},1032,["color"]),C("span",Ie,v(u.name),1),t(d),t(y,{color:u.status==="active"?"success":"grey",size:"small",variant:"tonal"},{default:e(()=>[l(v(u.status),1)]),_:2},1032,["color"])]),_:2},1024),t(k,null,{default:e(()=>[C("p",je,v(u.description),1),C("div",Ue,[t(r,{size:"small",class:"mr-2"},{default:e(()=>a[0]||(a[0]=[l(" mdi-format-list-bulleted ",-1)])),_:1,__:[0]}),C("span",null,v(u.fieldCount)+" fields",1),t(r,{size:"small",class:"mx-2"},{default:e(()=>a[1]||(a[1]=[l(" mdi-arrow-right ",-1)])),_:1,__:[1]}),C("span",null,v(u.transformCount)+" transforms",1)]),u.lastRun?(b(),B("div",Ne,[t(r,{size:"small",class:"mr-2"},{default:e(()=>a[2]||(a[2]=[l(" mdi-clock-outline ",-1)])),_:1,__:[2]}),C("span",null,"Last run: "+v(s.formatDate(u.lastRun)),1)])):ne("",!0)]),_:2},1024),t(z,null,{default:e(()=>[t(_,{size:"small",variant:"text",onClick:w=>s.$emit("edit",u)},{default:e(()=>[t(r,{size:"small",class:"mr-1"},{default:e(()=>a[3]||(a[3]=[l(" mdi-pencil ",-1)])),_:1,__:[3]}),a[4]||(a[4]=l(" Edit ",-1))]),_:2,__:[4]},1032,["onClick"]),t(_,{size:"small",variant:"text",onClick:w=>s.$emit("test",u)},{default:e(()=>[t(r,{size:"small",class:"mr-1"},{default:e(()=>a[5]||(a[5]=[l(" mdi-test-tube ",-1)])),_:1,__:[5]}),a[6]||(a[6]=l(" Test ",-1))]),_:2,__:[6]},1032,["onClick"]),t(d),t(_,{size:"small",variant:"text",onClick:w=>s.$emit("toggle-status",u)},{default:e(()=>[t(r,{size:"small",class:"mr-1"},{default:e(()=>[l(v(u.status==="active"?"mdi-pause":"mdi-play"),1)]),_:2},1024),l(" "+v(u.status==="active"?"Pause":"Activate"),1)]),_:2},1032,["onClick"]),t($,null,{activator:e(({props:w})=>[t(_,O({size:"small",variant:"text",icon:"mdi-dots-vertical"},{ref_for:!0},w),null,16)]),default:e(()=>[t(c,{density:"compact"},{default:e(()=>[t(g,{onClick:w=>s.$emit("duplicate",u)},{prepend:e(()=>[t(r,null,{default:e(()=>a[7]||(a[7]=[l("mdi-content-copy",-1)])),_:1,__:[7]})]),default:e(()=>[t(i,null,{default:e(()=>a[8]||(a[8]=[l("Duplicate",-1)])),_:1,__:[8]})]),_:2},1032,["onClick"]),t(g,{class:"text-error",onClick:w=>s.$emit("delete",u)},{prepend:e(()=>[t(r,null,{default:e(()=>a[9]||(a[9]=[l("mdi-delete",-1)])),_:1,__:[9]})]),default:e(()=>[t(i,null,{default:e(()=>a[10]||(a[10]=[l("Delete",-1)])),_:1,__:[10]})]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1032,["class"])]),_:2},1024))),128))]),_:1})}}});const Be=U(Re,[["__scopeId","data-v-42856567"]]),Ee=j({__name:"MappingList",props:{mappings:{},getMappingColor:{type:Function},getMappingIcon:{type:Function},formatDate:{type:Function}},emits:["edit","test","toggle-status","duplicate","delete"],setup(o){const s=[{title:"Name",key:"name",sortable:!0},{title:"Type",key:"type",sortable:!0},{title:"Status",key:"status",sortable:!0},{title:"Fields",key:"fieldCount",sortable:!0},{title:"Transforms",key:"transformCount",sortable:!0},{title:"Last Run",key:"lastRun",sortable:!0},{title:"Actions",key:"actions",sortable:!1}];return(a,r)=>{const f=n("v-icon"),d=n("v-chip"),y=n("v-btn"),x=n("v-list-item-title"),k=n("v-list-item"),_=n("v-list"),i=n("v-menu"),g=n("v-data-table");return b(),D(g,{headers:s,items:a.mappings,"item-value":"id",class:"glass-card"},{"item.type":e(({item:c})=>[t(d,{color:a.getMappingColor(c.type),size:"small",variant:"tonal"},{default:e(()=>[t(f,{start:"",size:"small"},{default:e(()=>[l(v(a.getMappingIcon(c.type)),1)]),_:2},1024),l(" "+v(c.type),1)]),_:2},1032,["color"])]),"item.status":e(({item:c})=>[t(d,{color:c.status==="active"?"success":"grey",size:"small",variant:"tonal"},{default:e(()=>[l(v(c.status),1)]),_:2},1032,["color"])]),"item.lastRun":e(({item:c})=>[l(v(c.lastRun?a.formatDate(c.lastRun):"Never"),1)]),"item.actions":e(({item:c})=>[t(y,{size:"small",variant:"text",icon:"mdi-pencil",onClick:$=>a.$emit("edit",c)},null,8,["onClick"]),t(y,{size:"small",variant:"text",icon:"mdi-test-tube",onClick:$=>a.$emit("test",c)},null,8,["onClick"]),t(y,{size:"small",variant:"text",icon:c.status==="active"?"mdi-pause":"mdi-play",onClick:$=>a.$emit("toggle-status",c)},null,8,["icon","onClick"]),t(i,null,{activator:e(({props:$})=>[t(y,O({size:"small",variant:"text",icon:"mdi-dots-vertical"},$),null,16)]),default:e(()=>[t(_,{density:"compact"},{default:e(()=>[t(k,{onClick:$=>a.$emit("duplicate",c)},{prepend:e(()=>[t(f,null,{default:e(()=>r[0]||(r[0]=[l("mdi-content-copy",-1)])),_:1,__:[0]})]),default:e(()=>[t(x,null,{default:e(()=>r[1]||(r[1]=[l("Duplicate",-1)])),_:1,__:[1]})]),_:2},1032,["onClick"]),t(k,{class:"text-error",onClick:$=>a.$emit("delete",c)},{prepend:e(()=>[t(f,null,{default:e(()=>r[2]||(r[2]=[l("mdi-delete",-1)])),_:1,__:[2]})]),default:e(()=>[t(x,null,{default:e(()=>r[3]||(r[3]=[l("Delete",-1)])),_:1,__:[3]})]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)]),_:1},8,["items"])}}});const qe=U(Ee,[["__scopeId","data-v-0f28ec13"]]),Le=j({__name:"CreateMappingDialog",props:{modelValue:{type:Boolean},mapping:{},creating:{type:Boolean}},emits:["update:modelValue","save"],setup(o,{emit:s}){const a=s,r=T(!1),f=T(),d=T({name:"",description:"",type:"",sourceType:""});oe(()=>d.value,_=>{d.value={..._}},{deep:!0});const y=[{title:"File Metadata",value:"file-metadata"},{title:"User Directory",value:"user-directory"},{title:"Project Structure",value:"project-structure"},{title:"Asset Metadata",value:"asset-metadata"}],x=[{title:"Dropbox",value:"dropbox"},{title:"Google Drive",value:"google-drive"},{title:"S3 Bucket",value:"s3"}];function k(){f.value.validate()&&a("save",d.value)}return(_,i)=>{const g=n("v-card-title"),c=n("v-text-field"),$=n("v-textarea"),z=n("v-select"),S=n("v-form"),F=n("v-card-text"),I=n("v-spacer"),u=n("v-btn"),w=n("v-card-actions"),q=n("v-card"),M=n("v-dialog");return b(),D(M,{"model-value":_.modelValue,"max-width":"500px","onUpdate:modelValue":i[6]||(i[6]=m=>_.$emit("update:modelValue",m))},{default:e(()=>[t(q,null,{default:e(()=>[t(g,null,{default:e(()=>i[7]||(i[7]=[C("span",{class:"text-h5"},"Create New Mapping",-1)])),_:1,__:[7]}),t(F,null,{default:e(()=>[t(S,{ref_key:"form",ref:f,modelValue:r.value,"onUpdate:modelValue":i[4]||(i[4]=m=>r.value=m)},{default:e(()=>[t(c,{modelValue:d.value.name,"onUpdate:modelValue":i[0]||(i[0]=m=>d.value.name=m),label:"Mapping Name","prepend-icon":"mdi-form-textbox",rules:[m=>!!m||"Name is required"],required:""},null,8,["modelValue","rules"]),t($,{modelValue:d.value.description,"onUpdate:modelValue":i[1]||(i[1]=m=>d.value.description=m),label:"Description","prepend-icon":"mdi-text",rows:"3"},null,8,["modelValue"]),t(z,{modelValue:d.value.type,"onUpdate:modelValue":i[2]||(i[2]=m=>d.value.type=m),items:y,label:"Mapping Type","prepend-icon":"mdi-format-list-bulleted-type",rules:[m=>!!m||"Type is required"],required:""},null,8,["modelValue","rules"]),t(z,{modelValue:d.value.sourceType,"onUpdate:modelValue":i[3]||(i[3]=m=>d.value.sourceType=m),items:x,label:"Source Type","prepend-icon":"mdi-database",rules:[m=>!!m||"Source type is required"],required:""},null,8,["modelValue","rules"])]),_:1},8,["modelValue"])]),_:1}),t(w,null,{default:e(()=>[t(I),t(u,{variant:"text",onClick:i[5]||(i[5]=m=>_.$emit("update:modelValue",!1))},{default:e(()=>i[8]||(i[8]=[l(" Cancel ",-1)])),_:1,__:[8]}),t(u,{color:"primary",loading:_.creating,disabled:!r.value,onClick:k},{default:e(()=>i[9]||(i[9]=[l(" Create ",-1)])),_:1,__:[9]},8,["loading","disabled"])]),_:1})]),_:1})]),_:1},8,["model-value"])}}});const Pe=U(Le,[["__scopeId","data-v-80f06951"]]),Ae={class:"d-flex align-center"},Ge={class:"text-body-2 mr-4"},He=j({__name:"MappingStudioView",setup(o){const{mappings:s,mappingTemplates:a,newMapping:r,showCreateDialog:f,creating:d,viewMode:y,activeMappingsCount:x,inactiveMappingsCount:k}=W(),{getMappingColor:_,getMappingIcon:i,formatDate:g,createMapping:c,createFromTemplate:$,editMapping:z,testMapping:S,duplicateMapping:F,toggleMappingStatus:I,deleteMapping:u,initializeMappings:w}=we();return le(()=>{w()}),(q,M)=>{const m=n("v-icon"),L=n("v-btn"),X=n("v-btn-toggle"),Y=n("v-card-title"),h=n("v-card"),ee=n("v-col"),te=n("v-row");return b(),B("div",null,[t(De,{onCreateMapping:M[0]||(M[0]=R=>f.value=!0)}),t(Fe,{templates:p(a),onCreateFromTemplate:p($)},null,8,["templates","onCreateFromTemplate"]),t(te,null,{default:e(()=>[t(ee,{cols:"12"},{default:e(()=>[t(h,{class:"glass-card"},{default:e(()=>[t(Y,{class:"d-flex align-center justify-space-between"},{default:e(()=>[C("div",null,[t(m,{class:"mr-2"},{default:e(()=>M[3]||(M[3]=[l(" mdi-map ",-1)])),_:1,__:[3]}),M[4]||(M[4]=l(" Mappings ",-1))]),C("div",Ae,[C("span",Ge,v(p(x))+" active, "+v(p(k))+" inactive ",1),t(X,{modelValue:p(y),"onUpdate:modelValue":M[1]||(M[1]=R=>P(y)?y.value=R:null),mandatory:""},{default:e(()=>[t(L,{value:"grid",size:"small"},{default:e(()=>[t(m,null,{default:e(()=>M[5]||(M[5]=[l("mdi-view-grid",-1)])),_:1,__:[5]})]),_:1}),t(L,{value:"list",size:"small"},{default:e(()=>[t(m,null,{default:e(()=>M[6]||(M[6]=[l("mdi-view-list",-1)])),_:1,__:[6]})]),_:1})]),_:1},8,["modelValue"])])]),_:1}),p(y)==="grid"?(b(),D(Be,{key:0,mappings:p(s),"get-mapping-color":p(_),"get-mapping-icon":p(i),"format-date":p(g),onEdit:p(z),onTest:p(S),onToggleStatus:p(I),onDuplicate:p(F),onDelete:p(u)},null,8,["mappings","get-mapping-color","get-mapping-icon","format-date","onEdit","onTest","onToggleStatus","onDuplicate","onDelete"])):(b(),D(qe,{key:1,mappings:p(s),"get-mapping-color":p(_),"get-mapping-icon":p(i),"format-date":p(g),onEdit:p(z),onTest:p(S),onToggleStatus:p(I),onDuplicate:p(F),onDelete:p(u)},null,8,["mappings","get-mapping-color","get-mapping-icon","format-date","onEdit","onTest","onToggleStatus","onDuplicate","onDelete"]))]),_:1})]),_:1})]),_:1}),t(Pe,{modelValue:p(f),"onUpdate:modelValue":M[2]||(M[2]=R=>P(f)?f.value=R:null),mapping:p(r),creating:p(d),onSave:p(c)},null,8,["modelValue","mapping","creating","onSave"])])}}});const Qe=U(He,[["__scopeId","data-v-159efd03"]]);export{Qe as default};
