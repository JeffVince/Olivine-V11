import{v as ie,c as de,r as v,M as ue,ac as F,A as t,a9 as l,a8 as b,ab as me,a5 as r,a7 as p,E as d,_ as n,F as R,ad as Y,ae as ce,W as y,a3 as G,B as ve}from"./vue-063894f7.js";import{u as pe,a as _e}from"./index-84fcf405.js";import{_ as fe}from"./_plugin-vue_export-helper-c27b6911.js";import"./apollo-3ed1981b.js";import"./supabase-cf010ec4.js";const ge={class:"mb-2"},ye={class:"text-caption text-medium-emphasis mb-2"},xe={class:"d-flex flex-wrap gap-1"},be={class:"d-flex align-center"},Pe={class:"d-flex align-center"},je=ie({__name:"Projects",setup(Ce){const H=me(),_=pe(),u=_e(),C=de(()=>_.projects),g=v(!1),x=v(!1),V=v(!1),k=v(!1),w=v(!1),f=v(null),P=v(""),s=v({name:"",company:"",timezone:"America/Los_Angeles",storageType:"dropbox"}),W=[a=>!!a||"Project name is required",a=>a.length>=3||"Project name must be at least 3 characters"],J=["America/Los_Angeles","America/New_York","America/Chicago","America/Denver","Europe/London","Europe/Paris","Asia/Tokyo"];function K(a){switch(a.toLowerCase()){case"active":return"success";case"syncing":return"warning";case"error":return"error";case"archived":return"grey";default:return"primary"}}function Q(a){switch(a){case"dropbox":return"mdi-dropbox";case"googledrive":return"mdi-google-drive";case"frameio":return"mdi-play-box";default:return"mdi-link"}}function X(a){return new Date(a).toLocaleDateString()}function D(a){_.setProject(a),H.push({name:"ProjectHome",params:{id:a}})}async function Z(a){const e=prompt("Enter new project name",a.name);if(!(!e||e===a.name))try{await _.editProject(a.id,e),u.add("success",`${a.name} renamed to ${e}`)}catch{u.add("error","Failed to update project")}}async function h(a){try{await _.archiveProject(a.id),u.add("success",`${a.name} archived successfully`)}catch{u.add("error","Failed to archive project")}}function ee(a){f.value=a,P.value="",x.value=!0}async function te(){if(f.value){w.value=!0;try{await _.deleteProject(f.value.id),u.add("success",`${f.value.name} deleted successfully`),x.value=!1}catch{u.add("error","Failed to delete project")}finally{w.value=!1}}}async function le(){k.value=!0;try{const a=await _.createProject({name:s.value.name,description:s.value.company,settings:{timezone:s.value.timezone,storageType:s.value.storageType,referenceProjectId:s.value.referenceProjectId||void 0}});g.value=!1,u.add("success",`Project ${a.name} created successfully`),D(a.id)}catch{u.add("error","Failed to create project")}finally{k.value=!1}}return ue(()=>{_.fetchProjects()}),(a,e)=>{const $=r("v-col"),m=r("v-btn"),L=r("v-row"),c=r("v-icon"),z=r("v-card-title"),E=r("v-chip"),A=r("v-card-text"),N=r("v-spacer"),T=r("v-list-item-title"),I=r("v-list-item"),B=r("v-divider"),oe=r("v-list"),ae=r("v-menu"),S=r("v-card-actions"),j=r("v-card"),U=r("v-text-field"),q=r("v-select"),M=r("v-radio"),ne=r("v-radio-group"),re=r("v-form"),O=r("v-dialog");return p(),F("div",null,[t(L,{class:"mb-4"},{default:l(()=>[t($,{cols:"12",md:"8"},{default:l(()=>e[14]||(e[14]=[d("h1",{class:"text-h4 font-weight-bold"}," Projects ",-1),d("p",{class:"text-subtitle-1 text-medium-emphasis"}," Manage your production projects and connect storage sources ",-1)])),_:1,__:[14]}),t($,{cols:"12",md:"4",class:"text-right"},{default:l(()=>[t(m,{color:"primary",size:"large","prepend-icon":"mdi-plus",class:"liquid-button",onClick:e[0]||(e[0]=o=>g.value=!0)},{default:l(()=>e[15]||(e[15]=[n(" New Project ",-1)])),_:1,__:[15]})]),_:1})]),_:1}),C.value.length>0?(p(),b(L,{key:0},{default:l(()=>[(p(!0),F(R,null,Y(C.value,o=>(p(),b($,{key:o.id,cols:"12",md:"6",lg:"4"},{default:l(()=>[t(j,{class:"project-card glass-card",hover:"",onClick:i=>D(o.id)},{default:l(()=>[t(z,{class:"d-flex align-center"},{default:l(()=>[t(c,{class:"mr-2",color:"primary"},{default:l(()=>e[16]||(e[16]=[n(" mdi-folder-multiple ",-1)])),_:1,__:[16]}),n(" "+y(o.name),1)]),_:2},1024),t(A,null,{default:l(()=>[d("div",ge,[t(E,{color:K(o.status),size:"small",variant:"tonal"},{default:l(()=>[n(y(o.status),1)]),_:2},1032,["color"])]),d("div",ye," Last activity: "+y(o.lastActivity?X(o.lastActivity):"N/A"),1),d("div",xe,[(p(!0),F(R,null,Y(o.integrations,i=>(p(),b(E,{key:i.type,size:"x-small",color:i.connected?"success":"warning",variant:"outlined"},{default:l(()=>[t(c,{start:"",size:"x-small"},{default:l(()=>[n(y(Q(i.type)),1)]),_:2},1024),n(" "+y(i.type),1)]),_:2},1032,["color"]))),128))])]),_:2},1024),t(S,null,{default:l(()=>[t(m,{variant:"text",color:"primary",onClick:G(i=>D(o.id),["stop"])},{default:l(()=>e[17]||(e[17]=[n(" Open Project ",-1)])),_:2,__:[17]},1032,["onClick"]),t(N),t(ae,null,{activator:l(({props:i})=>[t(m,ve({icon:"mdi-dots-vertical",variant:"text",size:"small"},{ref_for:!0},i,{onClick:e[1]||(e[1]=G(()=>{},["stop"]))}),null,16)]),default:l(()=>[t(oe,null,{default:l(()=>[t(I,{onClick:i=>Z(o)},{default:l(()=>[t(T,null,{default:l(()=>[t(c,{start:""},{default:l(()=>e[18]||(e[18]=[n(" mdi-pencil ",-1)])),_:1,__:[18]}),e[19]||(e[19]=n(" Edit ",-1))]),_:1,__:[19]})]),_:2},1032,["onClick"]),t(I,{onClick:i=>h(o)},{default:l(()=>[t(T,null,{default:l(()=>[t(c,{start:""},{default:l(()=>e[20]||(e[20]=[n(" mdi-archive ",-1)])),_:1,__:[20]}),e[21]||(e[21]=n(" Archive ",-1))]),_:1,__:[21]})]),_:2},1032,["onClick"]),t(B),t(I,{class:"text-error",onClick:i=>ee(o)},{default:l(()=>[t(T,null,{default:l(()=>[t(c,{start:""},{default:l(()=>e[22]||(e[22]=[n(" mdi-delete ",-1)])),_:1,__:[22]}),e[23]||(e[23]=n(" Delete ",-1))]),_:1,__:[23]})]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1032,["onClick"])]),_:2},1024))),128))]),_:1})):(p(),b(j,{key:1,class:"text-center pa-8 glass-card"},{default:l(()=>[t(c,{size:"64",color:"grey-lighten-1",class:"mb-4"},{default:l(()=>e[24]||(e[24]=[n(" mdi-folder-plus ",-1)])),_:1,__:[24]}),e[26]||(e[26]=d("h3",{class:"text-h6 mb-2"}," No Projects Yet ",-1)),e[27]||(e[27]=d("p",{class:"text-body-2 text-medium-emphasis mb-4"}," Create your first project to get started with Olivine ",-1)),t(m,{color:"primary",size:"large","prepend-icon":"mdi-plus",onClick:e[2]||(e[2]=o=>g.value=!0)},{default:l(()=>e[25]||(e[25]=[n(" Create Your First Project ",-1)])),_:1,__:[25]})]),_:1,__:[26,27]})),t(O,{modelValue:g.value,"onUpdate:modelValue":e[10]||(e[10]=o=>g.value=o),"max-width":"600"},{default:l(()=>[t(j,null,{default:l(()=>[t(z,null,{default:l(()=>e[28]||(e[28]=[d("span",{class:"text-h5"},"Create New Project",-1)])),_:1,__:[28]}),t(A,null,{default:l(()=>[t(re,{ref:"createForm",modelValue:V.value,"onUpdate:modelValue":e[8]||(e[8]=o=>V.value=o)},{default:l(()=>[t(U,{modelValue:s.value.name,"onUpdate:modelValue":e[3]||(e[3]=o=>s.value.name=o),label:"Project Name",rules:W,required:"","prepend-icon":"mdi-folder"},null,8,["modelValue"]),t(U,{modelValue:s.value.company,"onUpdate:modelValue":e[4]||(e[4]=o=>s.value.company=o),label:"Company (Optional)","prepend-icon":"mdi-domain"},null,8,["modelValue"]),t(q,{modelValue:s.value.timezone,"onUpdate:modelValue":e[5]||(e[5]=o=>s.value.timezone=o),items:J,label:"Timezone","prepend-icon":"mdi-clock",required:""},null,8,["modelValue"]),t(B,{class:"my-4"}),e[33]||(e[33]=d("h4",{class:"text-subtitle-1 mb-3"}," Connect Storage Source ",-1)),t(ne,{modelValue:s.value.storageType,"onUpdate:modelValue":e[6]||(e[6]=o=>s.value.storageType=o)},{default:l(()=>[t(M,{label:"Google Drive",value:"googledrive"},{label:l(()=>[d("div",be,[t(c,{class:"mr-2"},{default:l(()=>e[29]||(e[29]=[n(" mdi-google-drive ",-1)])),_:1,__:[29]}),e[30]||(e[30]=n(" Google Drive ",-1))])]),_:1}),t(M,{label:"Dropbox",value:"dropbox"},{label:l(()=>[d("div",Pe,[t(c,{class:"mr-2"},{default:l(()=>e[31]||(e[31]=[n(" mdi-dropbox ",-1)])),_:1,__:[31]}),e[32]||(e[32]=n(" Dropbox ",-1))])]),_:1})]),_:1},8,["modelValue"]),s.value.referenceProjectId?(p(),b(q,{key:0,modelValue:s.value.referenceProjectId,"onUpdate:modelValue":e[7]||(e[7]=o=>s.value.referenceProjectId=o),items:C.value,"item-title":"name","item-value":"id",label:"Reference Project (Optional)",hint:"Import naming conventions and templates from an existing project","persistent-hint":"","prepend-icon":"mdi-content-copy"},null,8,["modelValue","items"])):ce("",!0)]),_:1,__:[33]},8,["modelValue"])]),_:1}),t(S,null,{default:l(()=>[t(N),t(m,{variant:"text",onClick:e[9]||(e[9]=o=>g.value=!1)},{default:l(()=>e[34]||(e[34]=[n(" Cancel ",-1)])),_:1,__:[34]}),t(m,{color:"primary",disabled:!V.value,loading:k.value,onClick:le},{default:l(()=>e[35]||(e[35]=[n(" Create Project ",-1)])),_:1,__:[35]},8,["disabled","loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),t(O,{modelValue:x.value,"onUpdate:modelValue":e[13]||(e[13]=o=>x.value=o),"max-width":"400"},{default:l(()=>[t(j,null,{default:l(()=>[t(z,{class:"text-h6"},{default:l(()=>e[36]||(e[36]=[n(" Delete Project ",-1)])),_:1,__:[36]}),t(A,null,{default:l(()=>{var o,i;return[d("p",null,[e[37]||(e[37]=n("Are you sure you want to delete ",-1)),d("strong",null,y((o=f.value)==null?void 0:o.name),1),e[38]||(e[38]=n("?",-1))]),e[39]||(e[39]=d("p",{class:"text-error"}," This action cannot be undone. ",-1)),t(U,{modelValue:P.value,"onUpdate:modelValue":e[11]||(e[11]=se=>P.value=se),label:`Type '${(i=f.value)==null?void 0:i.name}' to confirm`,variant:"outlined",class:"mt-4"},null,8,["modelValue","label"])]}),_:1,__:[39]}),t(S,null,{default:l(()=>{var o;return[t(N),t(m,{variant:"text",onClick:e[12]||(e[12]=i=>x.value=!1)},{default:l(()=>e[40]||(e[40]=[n(" Cancel ",-1)])),_:1,__:[40]}),t(m,{color:"error",disabled:P.value!==((o=f.value)==null?void 0:o.name),loading:w.value,onClick:te},{default:l(()=>e[41]||(e[41]=[n(" Delete ",-1)])),_:1,__:[41]},8,["disabled","loading"])]}),_:1})]),_:1})]),_:1},8,["modelValue"])])}}});const ze=fe(je,[["__scopeId","data-v-911aeb88"]]);export{ze as default};
