import{r as x,c as q,aa as Q,v as H,a7 as w,a8 as o,a4 as l,a6 as f,A as t,E as m,_ as s,M as X,ab as M,u,a as F,F as O,ac as T,W as V,a2 as W,B as Z}from"./vue-3f691d55.js";import{u as J,a as h}from"./index-cc140e55.js";import{_ as K}from"./_plugin-vue_export-helper-c27b6911.js";import"./apollo-30a378f4.js";import"./supabase-cf010ec4.js";const C=x(!1),ee=x(!1),P=x(!1),b=x(null),L=x({name:"",description:void 0,settings:{}});x(!1);const z=J(),Y=q(()=>z.projects),te=Q(),R=h(),G=a=>{te.push(`/projects/${a}`)},oe=a=>{b.value=a,ee.value=!0},le=a=>{z.archiveProject(a.id),R.add("success",`Project ${a.name} archived successfully`)},ne=a=>{b.value=a,P.value=!0},se=()=>{b.value&&(z.deleteProject(b.value.id),R.add("success",`Project ${b.value.name} deleted successfully`),P.value=!1)},ae=()=>{z.createProject(L.value),R.add("success","Project created successfully"),C.value=!1,L.value={name:"",description:void 0,settings:{}}},re=a=>{switch(a){case"active":return"success";case"error":return"error";case"archived":return"warning";case"syncing":return"info";default:return"grey"}},ue=a=>{switch(a){case"s3":return"mdi-aws";case"gcs":return"mdi-google-cloud";case"azure":return"mdi-microsoft-azure";case"local":return"mdi-folder";default:return"mdi-help-circle"}},de=a=>new Date(a).toLocaleDateString(),ie=H({__name:"CreateProjectDialog",props:{modelValue:{type:Boolean},project:{}},emits:["update:modelValue","save"],setup(a,{emit:N}){const A=a,e=N,v=x(!1),p=[i=>!!i||"Project name is required",i=>i&&i.length<=50||"Project name must be less than 50 characters"],c=q({get:()=>A.project,set:i=>{}}),_=q({get:()=>A.modelValue,set:i=>{e("update:modelValue",i)}}),D=()=>{e("update:modelValue",!1)},$=()=>{v.value&&e("save",c.value)};return(i,r)=>{const y=l("v-card-title"),k=l("v-text-field"),B=l("v-textarea"),U=l("v-form"),E=l("v-card-text"),S=l("v-spacer"),j=l("v-btn"),I=l("v-card-actions"),n=l("v-card"),d=l("v-dialog");return f(),w(d,{modelValue:_.value,"onUpdate:modelValue":r[3]||(r[3]=g=>_.value=g),"max-width":"500px"},{default:o(()=>[t(n,null,{default:o(()=>[t(y,null,{default:o(()=>r[4]||(r[4]=[m("span",{class:"text-h5"},"Create New Project",-1)])),_:1,__:[4]}),t(E,null,{default:o(()=>[t(U,{ref:"form",modelValue:v.value,"onUpdate:modelValue":r[2]||(r[2]=g=>v.value=g)},{default:o(()=>[t(k,{modelValue:c.value.name,"onUpdate:modelValue":r[0]||(r[0]=g=>c.value.name=g),label:"Project Name",rules:p,required:""},null,8,["modelValue"]),t(B,{modelValue:c.value.description,"onUpdate:modelValue":r[1]||(r[1]=g=>c.value.description=g),label:"Description",rows:"3"},null,8,["modelValue"])]),_:1},8,["modelValue"])]),_:1}),t(I,null,{default:o(()=>[t(S),t(j,{color:"blue-darken-1",variant:"text",onClick:D},{default:o(()=>r[5]||(r[5]=[s(" Cancel ",-1)])),_:1,__:[5]}),t(j,{color:"blue-darken-1",variant:"text",onClick:$},{default:o(()=>r[6]||(r[6]=[s(" Save ",-1)])),_:1,__:[6]})]),_:1})]),_:1})]),_:1},8,["modelValue"])}}});const ce=K(ie,[["__scopeId","data-v-2fa7bce6"]]),_e={class:"mb-2"},me={class:"text-caption text-medium-emphasis mb-2"},ve={class:"d-flex flex-wrap gap-1"},pe=H({__name:"ProjectsView",setup(a){const N=J();return X(()=>{N.fetchProjects()}),(A,e)=>{const v=l("v-col"),p=l("v-btn"),c=l("v-row"),_=l("v-icon"),D=l("v-card-title"),$=l("v-chip"),i=l("v-card-text"),r=l("v-spacer"),y=l("v-list-item-title"),k=l("v-list-item"),B=l("v-divider"),U=l("v-list"),E=l("v-menu"),S=l("v-card-actions"),j=l("v-card"),I=l("v-dialog");return f(),M("div",null,[t(c,{class:"mb-4"},{default:o(()=>[t(v,{cols:"12",md:"8"},{default:o(()=>e[6]||(e[6]=[m("h1",{class:"text-h4 font-weight-bold"}," Projects ",-1),m("p",{class:"text-subtitle-1 text-medium-emphasis"}," Manage your production projects and connect storage sources ",-1)])),_:1,__:[6]}),t(v,{cols:"12",md:"4",class:"text-right"},{default:o(()=>[t(p,{color:"primary",size:"large","prepend-icon":"mdi-plus",class:"liquid-button",onClick:e[0]||(e[0]=n=>C.value=!0)},{default:o(()=>e[7]||(e[7]=[s(" New Project ",-1)])),_:1,__:[7]})]),_:1})]),_:1}),u(Y).length>0?(f(),w(c,{key:0},{default:o(()=>[(f(!0),M(O,null,T(u(Y),n=>(f(),w(v,{key:n.id,cols:"12",md:"6",lg:"4"},{default:o(()=>[t(j,{class:"project-card glass-card",hover:"",onClick:d=>u(G)(n.id)},{default:o(()=>[t(D,{class:"d-flex align-center"},{default:o(()=>[t(_,{class:"mr-2",color:"primary"},{default:o(()=>e[8]||(e[8]=[s(" mdi-folder-multiple ",-1)])),_:1,__:[8]}),s(" "+V(n.name),1)]),_:2},1024),t(i,null,{default:o(()=>[m("div",_e,[t($,{color:u(re)(n.status),size:"small",variant:"tonal"},{default:o(()=>[s(V(n.status),1)]),_:2},1032,["color"])]),m("div",me," Last activity: "+V(n.lastActivity?u(de)(n.lastActivity):"N/A"),1),m("div",ve,[(f(!0),M(O,null,T(n.integrations,d=>(f(),w($,{key:d.type,size:"x-small",color:d.connected?"success":"warning",variant:"outlined"},{default:o(()=>[t(_,{start:"",size:"x-small"},{default:o(()=>[s(V(u(ue)(d.type)),1)]),_:2},1024),s(" "+V(d.type),1)]),_:2},1032,["color"]))),128))])]),_:2},1024),t(S,null,{default:o(()=>[t(p,{variant:"text",color:"primary",onClick:W(d=>u(G)(n.id),["stop"])},{default:o(()=>e[9]||(e[9]=[s(" Open Project ",-1)])),_:2,__:[9]},1032,["onClick"]),t(r),t(E,null,{activator:o(({props:d})=>[t(p,Z({icon:"mdi-dots-vertical",variant:"text",size:"small"},{ref_for:!0},d,{onClick:e[1]||(e[1]=W(()=>{},["stop"]))}),null,16)]),default:o(()=>[t(U,null,{default:o(()=>[t(k,{onClick:d=>u(oe)(n)},{default:o(()=>[t(y,null,{default:o(()=>[t(_,{start:""},{default:o(()=>e[10]||(e[10]=[s(" mdi-pencil ",-1)])),_:1,__:[10]}),e[11]||(e[11]=s(" Edit ",-1))]),_:1,__:[11]})]),_:2},1032,["onClick"]),t(k,{onClick:d=>u(le)(n)},{default:o(()=>[t(y,null,{default:o(()=>[t(_,{start:""},{default:o(()=>e[12]||(e[12]=[s(" mdi-archive ",-1)])),_:1,__:[12]}),e[13]||(e[13]=s(" Archive ",-1))]),_:1,__:[13]})]),_:2},1032,["onClick"]),t(B),t(k,{class:"text-error",onClick:d=>u(ne)(n)},{default:o(()=>[t(y,null,{default:o(()=>[t(_,{start:""},{default:o(()=>e[14]||(e[14]=[s(" mdi-delete ",-1)])),_:1,__:[14]}),e[15]||(e[15]=s(" Delete ",-1))]),_:1,__:[15]})]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1032,["onClick"])]),_:2},1024))),128))]),_:1})):(f(),w(c,{key:1},{default:o(()=>[t(v,{cols:"12"},{default:o(()=>[t(j,{class:"text-center pa-8 glass-card"},{default:o(()=>[t(_,{size:"64",color:"grey-lighten-1",class:"mb-4"},{default:o(()=>e[16]||(e[16]=[s(" mdi-folder-plus ",-1)])),_:1,__:[16]}),e[18]||(e[18]=m("h3",{class:"text-h6 mb-2"}," No Projects Yet ",-1)),e[19]||(e[19]=m("p",{class:"text-body-2 text-medium-emphasis mb-4"}," Create your first project to get started with Olivine ",-1)),t(p,{color:"primary",size:"large","prepend-icon":"mdi-plus",onClick:e[2]||(e[2]=n=>C.value=!0)},{default:o(()=>e[17]||(e[17]=[s(" Create Project ",-1)])),_:1,__:[17]})]),_:1,__:[18,19]})]),_:1})]),_:1})),t(ce,{modelValue:u(C),"onUpdate:modelValue":e[3]||(e[3]=n=>F(C)?C.value=n:null),project:u(L),onSave:u(ae)},null,8,["modelValue","project","onSave"]),t(I,{modelValue:u(P),"onUpdate:modelValue":e[5]||(e[5]=n=>F(P)?P.value=n:null),"max-width":"500px"},{default:o(()=>[t(j,null,{default:o(()=>[t(D,null,{default:o(()=>e[20]||(e[20]=[m("span",{class:"text-h5"},"Confirm Delete",-1)])),_:1,__:[20]}),t(i,null,{default:o(()=>e[21]||(e[21]=[s(" Are you sure you want to delete this project? This action cannot be undone. ",-1)])),_:1,__:[21]}),t(S,null,{default:o(()=>[t(r),t(p,{color:"blue-darken-1",variant:"text",onClick:e[4]||(e[4]=n=>P.value=!1)},{default:o(()=>e[22]||(e[22]=[s(" Cancel ",-1)])),_:1,__:[22]}),t(p,{color:"red-darken-1",variant:"text",onClick:u(se)},{default:o(()=>e[23]||(e[23]=[s(" Delete ",-1)])),_:1,__:[23]},8,["onClick"])]),_:1})]),_:1})]),_:1},8,["modelValue"])])}}});const Pe=K(pe,[["__scopeId","data-v-8e66c625"]]);export{Pe as default};
