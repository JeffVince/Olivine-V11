import{b as se,a as $e}from"./index-cc140e55.js";import{c as N,u as ie,m as ae,l as le}from"./apollo-30a378f4.js";import{r as p,k as De,c as T,v as K,a4 as n,a6 as U,a7 as z,a8 as t,A as e,E as C,W as S,_ as c,B as Ie,ab as W,ad as ue,D as Je,ac as re,F as de,w as Le,u as q,a as Te}from"./vue-3f691d55.js";import{_ as Y}from"./_plugin-vue_export-helper-c27b6911.js";import"./supabase-cf010ec4.js";const Fe=N`
  query AgentJobs($orgId: ID!, $status: JobStatus, $type: JobType, $limit: Int, $offset: Int) {
    agentJobs(orgId: $orgId, status: $status, type: $type, limit: $limit, offset: $offset) {
      id
      orgId
      type
      target
      status
      priority
      attemptsMade
      retries
      worker
      startedAt
      finishedAt
      durationMs
      params
    }
  }
`,Ue=N`
  mutation EnqueueAgentJob($input: EnqueueAgentJobInput!) {
    enqueueAgentJob(input: $input) {
      id
      type
      status
    }
  }
`,qe=N`
  mutation CancelAgentJob($orgId: ID!, $id: ID!) {
    cancelAgentJob(orgId: $orgId, id: $id)
  }
`,Ee=N`
  subscription JobUpdated($orgId: ID!) {
    jobUpdated(orgId: $orgId) {
      id
      orgId
      type
      target
      status
      priority
      attemptsMade
      retries
      worker
      startedAt
      finishedAt
      durationMs
      params
    }
  }
`,Oe=N`
  subscription JobLogAppended($jobId: ID!) {
    jobLogAppended(jobId: $jobId) {
      jobId
      timestamp
      level
      message
    }
  }
`;function je(){var A;const x=se(),v=p([]),f=p({}),_=p({orgId:((A=x.currentOrg)==null?void 0:A.id)||"",limit:50,offset:0}),{onResult:m,refetch:g}=ie(Fe,_);m(u=>{var a;(a=u.data)!=null&&a.agentJobs&&(v.value=u.data.agentJobs)}),De(()=>{var u;_.value.orgId=((u=x.currentOrg)==null?void 0:u.id)||""});const{onResult:d}=ae(Ee,()=>({orgId:_.value.orgId}));d(u=>{var l;const a=(l=u.data)==null?void 0:l.jobUpdated;if(a){const I=v.value.findIndex(J=>J.id===a.id);I>=0?v.value.splice(I,1,a):v.value.unshift(a)}});const{mutate:b}=le(Ue),{mutate:$}=le(qe);function D(u){return b({input:u})}function s(u,a){return $({orgId:u,id:a})}function o(u){const{onResult:a}=ae(Oe,{jobId:u});a(l=>{var J;const I=(J=l.data)==null?void 0:J.jobLogAppended;I&&(f.value[u]=f.value[u]||[],f.value[u].push(I))})}return{jobs:v,logs:f,variables:_,refetch:g,enqueueJob:D,cancelJob:s,subscribeJobLogs:o}}const Re=N`
  query AgentHealth($orgId: ID!) {
    agentHealth(orgId: $orgId) {
      status
      agents
    }
    queues(orgId: $orgId) {
      name
      waiting
      active
      completed
      failed
      delayed
    }
  }
`;function oe(x){const v=p("unknown"),f=p([]),_=p([]),{onResult:m,refetch:g}=ie(Re,()=>({orgId:x.value}));return m(d=>{var b,$,D,s,o;v.value=(($=(b=d.data)==null?void 0:b.agentHealth)==null?void 0:$.status)??"unknown",f.value=((s=(D=d.data)==null?void 0:D.agentHealth)==null?void 0:s.agents)??[],_.value=((o=d.data)==null?void 0:o.queues)??[]}),{status:v,agents:f,queues:_,refetch:g}}function ze(x){const v=p([]),f=p(!1),_=p(null),m=p(!1),g=p(""),d=p(null),b=p(null),$=T(()=>v.value.filter(r=>!(g.value&&!r.name.toLowerCase().includes(g.value.toLowerCase())&&!r.description.toLowerCase().includes(g.value.toLowerCase())||d.value&&r.status!==d.value||b.value&&r.type!==b.value)));function D(r){m.value=!0,setTimeout(()=>{const w={...r,id:(v.value.length+1).toString(),tasksCompleted:0,tasksRunning:0,uptime:"0h 0m",created:new Date().toISOString()};v.value.push(w),f.value=!1,m.value=!1,x({message:"Agent created successfully",type:"success"})},500)}function s(r){m.value=!0,setTimeout(()=>{const w=v.value.findIndex(F=>F.id===r.id);w!==-1&&(v.value[w]={...r},f.value=!1,m.value=!1,x({message:"Agent updated successfully",type:"success"}))},500)}function o(r){setTimeout(()=>{v.value=v.value.filter(w=>w.id!==r.id),x({message:"Agent deleted successfully",type:"success"})},500)}function A(r){const w=v.value.findIndex(F=>F.id===r.id);if(w!==-1){const F=r.status==="active"?"inactive":"active";v.value[w]={...r,status:F},x({message:`Agent ${F==="active"?"started":"stopped"} successfully`,type:"success"})}}function u(r){const w={...r,id:(v.value.length+1).toString(),name:`${r.name} (Copy)`,created:new Date().toISOString()};v.value.push(w),x({message:"Agent duplicated successfully",type:"success"})}function a(r){console.log("Viewing agent",r)}function l(r){_.value={...r},f.value=!0}function I(){_.value=null,f.value=!0}function J(r){switch(r){case"file-processor":return"blue";case"data-sync":return"green";case"notification":return"orange";case"backup":return"purple";case"analytics":return"teal";default:return"grey"}}function j(r){switch(r){case"file-processor":return"mdi-file-cog";case"data-sync":return"mdi-sync";case"notification":return"mdi-bell";case"backup":return"mdi-backup-restore";case"analytics":return"mdi-chart-line";default:return"mdi-robot"}}function E(r){switch(r){case"active":return"success";case"inactive":return"grey";case"error":return"error";case"paused":return"warning";default:return"grey"}}function k(r){return new Date(r).toLocaleString()}return{agents:v,showCreateDialog:f,editingAgent:_,saving:m,search:g,statusFilter:d,typeFilter:b,filteredAgents:$,createAgent:D,updateAgent:s,deleteAgent:o,toggleAgentStatus:A,duplicateAgent:u,viewAgent:a,editAgent:l,openCreateDialog:I,getAgentColor:J,getAgentIcon:j,getStatusColor:E,formatDateTime:k}}function Be(x,v,f,_){const m=p(""),g=p(null),d=p(null),b=T(()=>x.value.filter(l=>!(m.value&&!l.id.toLowerCase().includes(m.value.toLowerCase())&&!l.type.toLowerCase().includes(m.value.toLowerCase())&&!l.status.toLowerCase().includes(m.value.toLowerCase())||g.value&&l.status!==g.value||d.value&&l.type!==d.value))),$=p(!1);function D(){console.log("Refetching jobs")}function s(l){console.log("Canceling job",l.id)}function o(l){console.log("Opening logs for job",l.id)}function A(l){switch(l){case"completed":return"success";case"failed":return"error";case"active":return"info";case"waiting":return"warning";case"delayed":return"purple";default:return"grey"}}function u(l){return l<1e3?`${l}ms`:l<6e4?`${(l/1e3).toFixed(2)}s`:`${(l/6e4).toFixed(2)}m`}function a(l){return new Date(l).toLocaleString()}return{searchQuery:m,statusFilter:g,typeFilter:d,filteredJobs:b,loading:$,jobs:x,logs:v,refetchJobs:D,cancelJob:s,openLogs:o,subscribeJobLogs:f,getJobStatusColor:A,formatDuration:u,formatDate:a}}const he={class:"flex-grow-1"},Me={class:"text-subtitle-1"},Ne={class:"text-body-2 mb-3"},Qe={class:"text-h6"},He={class:"text-h6"},Pe={class:"text-h6"},Ge={key:0,class:"text-caption text-medium-emphasis"},We=K({__name:"AgentCard",props:{agent:{},toggling:{}},emits:["view","edit","duplicate","delete","toggle"],setup(x){function v(s){switch(s){case"file-processor":return"blue";case"data-sync":return"green";case"notification":return"orange";case"backup":return"purple";case"analytics":return"teal";default:return"grey"}}function f(s){switch(s){case"file-processor":return"mdi-file-cog";case"data-sync":return"mdi-sync";case"notification":return"mdi-bell";case"backup":return"mdi-backup-restore";case"analytics":return"mdi-chart-line";default:return"mdi-robot"}}function _(s){switch(s){case"active":return"success";case"inactive":return"grey";case"error":return"error";case"paused":return"warning";default:return"grey"}}function m(s){return new Date(s).toLocaleString()}function g(s){}function d(s){}function b(s){}function $(s){}function D(s){}return(s,o)=>{const A=n("v-icon"),u=n("v-avatar"),a=n("v-chip"),l=n("v-btn"),I=n("v-list-item-title"),J=n("v-list-item"),j=n("v-divider"),E=n("v-list"),k=n("v-menu"),r=n("v-card-title"),w=n("v-col"),F=n("v-row"),B=n("v-card-text"),h=n("v-spacer"),M=n("v-card-actions"),L=n("v-card");return U(),z(L,{class:Je(["agent-card",{active:s.agent.status==="active"}]),variant:"outlined"},{default:t(()=>[e(r,{class:"d-flex align-center"},{default:t(()=>[e(u,{color:v(s.agent.type),class:"mr-3",size:"40"},{default:t(()=>[e(A,{icon:f(s.agent.type)},null,8,["icon"])]),_:1},8,["color"]),C("div",he,[C("div",Me,S(s.agent.name),1),e(a,{color:_(s.agent.status),size:"x-small",variant:"tonal"},{default:t(()=>[c(S(s.agent.status),1)]),_:1},8,["color"])]),e(k,null,{activator:t(({props:y})=>[e(l,Ie(y,{icon:"mdi-dots-vertical",variant:"text",size:"small"}),null,16)]),default:t(()=>[e(E,null,{default:t(()=>[e(J,{onClick:o[0]||(o[0]=y=>(s.agent,void 0))},{default:t(()=>[e(I,null,{default:t(()=>[e(A,{start:""},{default:t(()=>o[6]||(o[6]=[c(" mdi-eye ",-1)])),_:1,__:[6]}),o[7]||(o[7]=c(" View Details ",-1))]),_:1,__:[7]})]),_:1}),e(J,{onClick:o[1]||(o[1]=y=>(s.agent,void 0))},{default:t(()=>[e(I,null,{default:t(()=>[e(A,{start:""},{default:t(()=>o[8]||(o[8]=[c(" mdi-pencil ",-1)])),_:1,__:[8]}),o[9]||(o[9]=c(" Edit ",-1))]),_:1,__:[9]})]),_:1}),e(J,{onClick:o[2]||(o[2]=y=>(s.agent,void 0))},{default:t(()=>[e(I,null,{default:t(()=>[e(A,{start:""},{default:t(()=>o[10]||(o[10]=[c(" mdi-content-copy ",-1)])),_:1,__:[10]}),o[11]||(o[11]=c(" Duplicate ",-1))]),_:1,__:[11]})]),_:1}),e(j),e(J,{class:"text-error",onClick:o[3]||(o[3]=y=>(s.agent,void 0))},{default:t(()=>[e(I,null,{default:t(()=>[e(A,{start:""},{default:t(()=>o[12]||(o[12]=[c(" mdi-delete ",-1)])),_:1,__:[12]}),o[13]||(o[13]=c(" Delete ",-1))]),_:1,__:[13]})]),_:1})]),_:1})]),_:1})]),_:1}),e(B,null,{default:t(()=>[C("p",Ne,S(s.agent.description),1),e(F,{class:"text-center mb-3"},{default:t(()=>[e(w,{cols:"4"},{default:t(()=>[C("div",Qe,S(s.agent.tasksCompleted),1),o[14]||(o[14]=C("div",{class:"text-caption text-medium-emphasis"}," Completed ",-1))]),_:1,__:[14]}),e(w,{cols:"4"},{default:t(()=>[C("div",He,S(s.agent.tasksRunning),1),o[15]||(o[15]=C("div",{class:"text-caption text-medium-emphasis"}," Running ",-1))]),_:1,__:[15]}),e(w,{cols:"4"},{default:t(()=>[C("div",Pe,S(s.agent.uptime),1),o[16]||(o[16]=C("div",{class:"text-caption text-medium-emphasis"}," Uptime ",-1))]),_:1,__:[16]})]),_:1}),s.agent.lastActivity?(U(),W("div",Ge," Last activity: "+S(m(s.agent.lastActivity)),1)):ue("",!0)]),_:1}),e(M,null,{default:t(()=>[e(l,{color:s.agent.status==="active"?"warning":"success",variant:"outlined",size:"small",loading:s.toggling===s.agent.id,onClick:o[4]||(o[4]=y=>(s.agent,void 0))},{default:t(()=>[c(S(s.agent.status==="active"?"Stop":"Start"),1)]),_:1},8,["color","loading"]),e(h),e(l,{color:"primary",variant:"flat",size:"small",onClick:o[5]||(o[5]=y=>(s.agent,void 0))},{default:t(()=>o[17]||(o[17]=[c(" View Details ",-1)])),_:1,__:[17]})]),_:1})]),_:1},8,["class"])}}});const Ke=Y(We,[["__scopeId","data-v-ac7e4e62"]]),Xe={class:"d-flex align-center"},Ye=K({__name:"JobsTable",props:{jobs:{},loading:{type:Boolean}},emits:["refresh","open-logs","cancel-job"],setup(x,{emit:v}){const f=x,_=v,m=p(""),g=p({status:null,type:null}),d=[{title:"Type",key:"type"},{title:"Target",key:"target"},{title:"Status",key:"status"},{title:"Started",key:"startedAt"},{title:"Duration",key:"durationMs"},{title:"Actions",key:"actions",sortable:!1}],b=T(()=>f.jobs.filter(a=>!(m.value&&!a.target.toLowerCase().includes(m.value.toLowerCase())||g.value.status&&a.status!==g.value.status||g.value.type&&a.type!==g.value.type)));function $(a){switch(a){case"queued":return"info";case"active":return"primary";case"completed":return"success";case"failed":return"error";default:return"grey"}}function D(a){return new Date(a).toLocaleString()}function s(a){return a<1e3?`${a}ms`:a<6e4?`${(a/1e3).toFixed(1)}s`:`${(a/6e4).toFixed(1)}m`}function o(){_("refresh")}function A(a){_("open-logs",a)}function u(a){_("cancel-job",a)}return(a,l)=>{const I=n("v-spacer"),J=n("v-text-field"),j=n("v-card-title"),E=n("v-select"),k=n("v-col"),r=n("v-icon"),w=n("v-btn"),F=n("v-row"),B=n("v-chip"),h=n("v-data-table"),M=n("v-card-text"),L=n("v-card");return U(),z(L,null,{default:t(()=>[e(j,null,{default:t(()=>[C("div",Xe,[l[3]||(l[3]=C("span",null,"Job Queue",-1)),e(I),e(J,{modelValue:m.value,"onUpdate:modelValue":l[0]||(l[0]=y=>m.value=y),label:"Search jobs","prepend-inner-icon":"mdi-magnify",variant:"outlined",density:"compact","hide-details":"",class:"max-w-200"},null,8,["modelValue"])])]),_:1}),e(M,null,{default:t(()=>[e(F,{class:"mb-4"},{default:t(()=>[e(k,{cols:"12",md:"4"},{default:t(()=>[e(E,{modelValue:g.value.status,"onUpdate:modelValue":l[1]||(l[1]=y=>g.value.status=y),items:[{title:"All Statuses",value:null},{title:"Queued",value:"queued"},{title:"Active",value:"active"},{title:"Completed",value:"completed"},{title:"Failed",value:"failed"}],label:"Status",variant:"outlined",density:"compact","hide-details":""},null,8,["modelValue"])]),_:1}),e(k,{cols:"12",md:"4"},{default:t(()=>[e(E,{modelValue:g.value.type,"onUpdate:modelValue":l[2]||(l[2]=y=>g.value.type=y),items:[{title:"All Types",value:null},{title:"File Processing",value:"file-processing"},{title:"Data Sync",value:"data-sync"},{title:"Notification",value:"notification"},{title:"Backup",value:"backup"}],label:"Type",variant:"outlined",density:"compact","hide-details":""},null,8,["modelValue"])]),_:1}),e(k,{cols:"12",md:"4"},{default:t(()=>[e(w,{color:"primary",variant:"outlined",block:"",onClick:o},{default:t(()=>[e(r,{start:""},{default:t(()=>l[4]||(l[4]=[c(" mdi-refresh ",-1)])),_:1,__:[4]}),l[5]||(l[5]=c(" Refresh ",-1))]),_:1,__:[5]})]),_:1})]),_:1}),e(h,{headers:d,items:b.value,loading:a.loading,"items-per-page":10,"item-value":"id",class:"elevation-1"},{"item.status":t(({item:y})=>[e(B,{color:$(y.status),size:"small",variant:"tonal"},{default:t(()=>[c(S(y.status),1)]),_:2},1032,["color"])]),"item.startedAt":t(({item:y})=>[c(S(D(y.startedAt)),1)]),"item.durationMs":t(({item:y})=>[c(S(s(y.durationMs)),1)]),"item.actions":t(({item:y})=>[e(w,{color:"primary",variant:"text",size:"small",onClick:Z=>A(y)},{default:t(()=>[e(r,{start:""},{default:t(()=>l[6]||(l[6]=[c(" mdi-file-document ",-1)])),_:1,__:[6]}),l[7]||(l[7]=c(" Logs ",-1))]),_:2,__:[7]},1032,["onClick"]),y.status==="active"||y.status==="queued"?(U(),z(w,{key:0,color:"warning",variant:"text",size:"small",onClick:Z=>u(y)},{default:t(()=>[e(r,{start:""},{default:t(()=>l[8]||(l[8]=[c(" mdi-cancel ",-1)])),_:1,__:[8]}),l[9]||(l[9]=c(" Cancel ",-1))]),_:2,__:[9]},1032,["onClick"])):ue("",!0)]),_:1},8,["items","loading"])]),_:1})]),_:1})}}});const Ze=Y(Ye,[["__scopeId","data-v-49e1ab0b"]]),et={key:1,class:"text-medium-emphasis"},tt=K({__name:"LogsDialog",props:{modelValue:{type:Boolean},logs:{}},emits:["update:modelValue"],setup(x,{emit:v}){const f=x,_=v,m=T({get:()=>f.modelValue,set:d=>_("update:modelValue",d)});function g(){_("update:modelValue",!1)}return(d,b)=>{const $=n("v-card-title"),D=n("v-chip"),s=n("v-list-item-title"),o=n("v-list-item-subtitle"),A=n("v-list-item"),u=n("v-list"),a=n("v-card-text"),l=n("v-spacer"),I=n("v-btn"),J=n("v-card-actions"),j=n("v-card"),E=n("v-dialog");return U(),z(E,{modelValue:m.value,"onUpdate:modelValue":b[0]||(b[0]=k=>m.value=k),"max-width":"800",persistent:""},{default:t(()=>[e(j,null,{default:t(()=>[e($,null,{default:t(()=>b[1]||(b[1]=[c("Job Logs",-1)])),_:1,__:[1]}),e(a,{style:{"max-height":"60vh",overflow:"auto"}},{default:t(()=>[d.logs.length?(U(),z(u,{key:0},{default:t(()=>[(U(!0),W(de,null,re(d.logs,k=>(U(),z(A,{key:k.timestamp+k.message},{default:t(()=>[e(s,null,{default:t(()=>[C("strong",null,S(new Date(k.timestamp).toLocaleString()),1),e(D,{color:k.level==="error"?"error":k.level==="warn"?"warning":"info",size:"x-small",class:"ml-2",variant:"tonal"},{default:t(()=>[c(S(k.level),1)]),_:2},1032,["color"])]),_:2},1024),e(o,{class:"mt-1"},{default:t(()=>[c(S(k.message),1)]),_:2},1024)]),_:2},1024))),128))]),_:1})):(U(),W("div",et," No logs available for this job. "))]),_:1}),e(J,null,{default:t(()=>[e(l),e(I,{onClick:g},{default:t(()=>b[2]||(b[2]=[c(" Close ",-1)])),_:1,__:[2]})]),_:1})]),_:1})]),_:1},8,["modelValue"])}}}),nt=K({__name:"CreateAgentDialog",props:{modelValue:{type:Boolean},agent:{},saving:{type:Boolean}},emits:["update:modelValue","save"],setup(x,{emit:v}){const f=x,_=v,m=p(),g=p(!1),d=p({id:"",name:"",description:"",type:"file-processor",status:"inactive",tasksCompleted:0,tasksRunning:0,uptime:"0h 0m",created:new Date().toISOString()}),b=T(()=>{var u;return!!((u=f.agent)!=null&&u.id)}),$=[{title:"File Processor",value:"file-processor"},{title:"Data Sync",value:"data-sync"},{title:"Notification",value:"notification"},{title:"Backup",value:"backup"},{title:"Analytics",value:"analytics"}],D=u=>!!u||"This field is required";Le(()=>f.agent,u=>{u?d.value={...u}:d.value={id:"",name:"",description:"",type:"file-processor",status:"inactive",tasksCompleted:0,tasksRunning:0,uptime:"0h 0m",created:new Date().toISOString()}},{immediate:!0});const s=T({get:()=>f.modelValue,set:u=>_("update:modelValue",u)});function o(){_("update:modelValue",!1)}function A(){m.value.validate()&&_("save",d.value)}return(u,a)=>{const l=n("v-card-title"),I=n("v-text-field"),J=n("v-textarea"),j=n("v-select"),E=n("v-switch"),k=n("v-form"),r=n("v-card-text"),w=n("v-btn"),F=n("v-spacer"),B=n("v-card-actions"),h=n("v-card"),M=n("v-dialog");return U(),z(M,{modelValue:s.value,"onUpdate:modelValue":a[5]||(a[5]=L=>s.value=L),"max-width":"600",persistent:""},{default:t(()=>[e(h,null,{default:t(()=>[e(l,null,{default:t(()=>[c(S(b.value?"Edit Agent":"Create New Agent"),1)]),_:1}),e(r,null,{default:t(()=>[e(k,{ref_key:"form",ref:m,modelValue:g.value,"onUpdate:modelValue":a[4]||(a[4]=L=>g.value=L)},{default:t(()=>[e(I,{modelValue:d.value.name,"onUpdate:modelValue":a[0]||(a[0]=L=>d.value.name=L),label:"Agent Name",rules:[D],required:""},null,8,["modelValue","rules"]),e(J,{modelValue:d.value.description,"onUpdate:modelValue":a[1]||(a[1]=L=>d.value.description=L),label:"Description",rows:"3"},null,8,["modelValue"]),e(j,{modelValue:d.value.type,"onUpdate:modelValue":a[2]||(a[2]=L=>d.value.type=L),items:$,label:"Agent Type",rules:[D],required:""},null,8,["modelValue","rules"]),e(E,{modelValue:d.value.status,"onUpdate:modelValue":a[3]||(a[3]=L=>d.value.status=L),label:`Status: ${d.value.status==="active"?"Active":"Inactive"}`,"true-value":"active","false-value":"inactive"},null,8,["modelValue","label"])]),_:1},8,["modelValue"])]),_:1}),e(B,null,{default:t(()=>[e(w,{onClick:o},{default:t(()=>a[6]||(a[6]=[c(" Cancel ",-1)])),_:1,__:[6]}),e(F),e(w,{color:"primary",loading:u.saving,disabled:!g.value,onClick:A},{default:t(()=>[c(S(b.value?"Update":"Create"),1)]),_:1},8,["loading","disabled"])]),_:1})]),_:1})]),_:1},8,["modelValue"])}}}),at={class:"text-h4"},lt={class:"text-h4"},ot={class:"text-h4"},st={class:"text-h4"},it={class:"d-flex align-center gap-2"},ut=K({__name:"AgentConsoleView",setup(x){const v=$e(),{jobs:f,logs:_,subscribeJobLogs:m,cancelJob:g}=je(),d=se(),b=T(()=>{var V;return((V=d.currentOrg)==null?void 0:V.id)||""});oe(b);const $=p(null);p(new Set);const D=T(()=>$.value&&_.value[$.value]?_.value[$.value]:[]),s=T(()=>D.value),{agents:o,showCreateDialog:A,editingAgent:u,saving:a,search:l,statusFilter:I,filteredAgents:J,createAgent:j,updateAgent:E,deleteAgent:k,toggleAgentStatus:r,duplicateAgent:w,viewAgent:F,editAgent:B,openCreateDialog:h,getAgentColor:M,getAgentIcon:L,getStatusColor:y,formatDateTime:Z}=ze(V=>v.add("info",V.message)),{searchQuery:rt,statusFilter:dt,typeFilter:ct,filteredJobs:ce,loading:vt,refetchJobs:ve,cancelJob:mt,openLogs:me,getJobStatusColor:gt,formatDuration:pt,formatDate:_t}=Be(f,D,m),ee=p(!1),ge=p(null),te=p(""),ne=p("");function pe(V){var i;(i=d.currentOrg)!=null&&i.id&&g(d.currentOrg.id,V.id)}const _e=T(()=>o.value.filter(V=>V.status==="active").length);T(()=>o.value.reduce((V,i)=>V+i.tasksRunning,0)),T(()=>o.value.reduce((V,i)=>V+i.tasksCompleted,0)),T(()=>0);const fe=[{title:"Active",value:"active"},{title:"Inactive",value:"inactive"},{title:"Error",value:"error"},{title:"Paused",value:"paused"}],{status:ft,queues:X}=oe(b),be=T(()=>X.value.reduce((V,i)=>V+(i.active||0),0)),ye=T(()=>X.value.reduce((V,i)=>V+(i.waiting||0),0)),Ae=T(()=>X.value.reduce((V,i)=>V+(i.failed||0),0)),we=p(!1);function Ce(V){console.log("Saving agent",V),A.value=!1}return(V,i)=>{const R=n("v-col"),xe=n("v-btn"),Q=n("v-row"),H=n("v-icon"),P=n("v-card-text"),G=n("v-card"),ke=n("v-text-field"),Ve=n("v-select"),Se=n("v-card-title");return U(),W("div",null,[e(Q,{class:"mb-4"},{default:t(()=>[e(R,{cols:"12",md:"8"},{default:t(()=>i[5]||(i[5]=[C("h1",{class:"text-h4 font-weight-bold"}," Agent Console ",-1),C("p",{class:"text-subtitle-1 text-medium-emphasis"}," Manage and monitor AI agents and automation workflows ",-1)])),_:1,__:[5]}),e(R,{cols:"12",md:"4",class:"text-right"},{default:t(()=>[e(xe,{color:"primary","prepend-icon":"mdi-plus",class:"liquid-button",onClick:i[0]||(i[0]=O=>A.value=!0)},{default:t(()=>i[6]||(i[6]=[c(" Create Agent ",-1)])),_:1,__:[6]})]),_:1})]),_:1}),e(Q,{class:"mb-6"},{default:t(()=>[e(R,{cols:"12",md:"3"},{default:t(()=>[e(G,{class:"glass-card"},{default:t(()=>[e(P,{class:"text-center"},{default:t(()=>[e(H,{size:"48",color:"success",class:"mb-2"},{default:t(()=>i[7]||(i[7]=[c(" mdi-robot ",-1)])),_:1,__:[7]}),C("div",at,S(_e.value),1),i[8]||(i[8]=C("div",{class:"text-subtitle-2 text-medium-emphasis"}," Active Agents ",-1))]),_:1,__:[8]})]),_:1})]),_:1}),e(R,{cols:"12",md:"3"},{default:t(()=>[e(G,{class:"glass-card"},{default:t(()=>[e(P,{class:"text-center"},{default:t(()=>[e(H,{size:"48",color:"primary",class:"mb-2"},{default:t(()=>i[9]||(i[9]=[c(" mdi-play ",-1)])),_:1,__:[9]}),C("div",lt,S(be.value),1),i[10]||(i[10]=C("div",{class:"text-subtitle-2 text-medium-emphasis"}," Running Tasks ",-1))]),_:1,__:[10]})]),_:1})]),_:1}),e(R,{cols:"12",md:"3"},{default:t(()=>[e(G,null,{default:t(()=>[e(P,{class:"text-center"},{default:t(()=>[e(H,{size:"48",color:"warning",class:"mb-2"},{default:t(()=>i[11]||(i[11]=[c(" mdi-clock ",-1)])),_:1,__:[11]}),C("div",ot,S(ye.value),1),i[12]||(i[12]=C("div",{class:"text-subtitle-2 text-medium-emphasis"}," Queued Tasks ",-1))]),_:1,__:[12]})]),_:1})]),_:1}),e(R,{cols:"12",md:"3"},{default:t(()=>[e(G,null,{default:t(()=>[e(P,{class:"text-center"},{default:t(()=>[e(H,{size:"48",color:"error",class:"mb-2"},{default:t(()=>i[13]||(i[13]=[c(" mdi-alert ",-1)])),_:1,__:[13]}),C("div",st,S(Ae.value),1),i[14]||(i[14]=C("div",{class:"text-subtitle-2 text-medium-emphasis"}," Failed Tasks ",-1))]),_:1,__:[14]})]),_:1})]),_:1})]),_:1}),e(Q,null,{default:t(()=>[e(R,{cols:"12"},{default:t(()=>[e(G,null,{default:t(()=>[e(Se,{class:"d-flex align-center justify-space-between"},{default:t(()=>[C("div",null,[e(H,{class:"mr-2"},{default:t(()=>i[15]||(i[15]=[c(" mdi-robot ",-1)])),_:1,__:[15]}),i[16]||(i[16]=c(" AI Agents ",-1))]),C("div",it,[e(ke,{modelValue:te.value,"onUpdate:modelValue":i[1]||(i[1]=O=>te.value=O),"prepend-inner-icon":"mdi-magnify",label:"Search agents...",variant:"outlined",density:"compact","hide-details":"",clearable:"",style:{width:"250px"}},null,8,["modelValue"]),e(Ve,{modelValue:ne.value,"onUpdate:modelValue":i[2]||(i[2]=O=>ne.value=O),items:fe,label:"Filter by status",variant:"outlined",density:"compact","hide-details":"",clearable:"",style:{width:"150px"}},null,8,["modelValue"])])]),_:1}),e(P,null,{default:t(()=>[e(Q,null,{default:t(()=>[(U(!0),W(de,null,re(q(J),O=>(U(),z(R,{key:O.id,cols:"12",md:"6",lg:"4"},{default:t(()=>[e(Ke,{agent:O,toggling:ge.value,onView:q(F),onEdit:q(B),onDuplicate:q(w),onDelete:q(k),onToggle:q(r)},null,8,["agent","toggling","onView","onEdit","onDuplicate","onDelete","onToggle"])]),_:2},1024))),128))]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),e(Q,{class:"mt-4"},{default:t(()=>[e(R,{cols:"12"},{default:t(()=>[e(Ze,{jobs:q(ce),loading:we.value,onRefresh:q(ve),onOpenLogs:q(me),onCancelJob:pe},null,8,["jobs","loading","onRefresh","onOpenLogs"])]),_:1})]),_:1}),e(tt,{modelValue:ee.value,"onUpdate:modelValue":i[3]||(i[3]=O=>ee.value=O),logs:s.value},null,8,["modelValue","logs"]),e(nt,{modelValue:q(A),"onUpdate:modelValue":i[4]||(i[4]=O=>Te(A)?A.value=O:null),agent:q(u),saving:q(a),onSave:Ce},null,8,["modelValue","agent","saving"])])}}});const xt=Y(ut,[["__scopeId","data-v-56dd7eb0"]]);export{xt as default};
